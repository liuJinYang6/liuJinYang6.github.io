<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://liujinyang6.github.io</id>
    <title>Liu jinyang&apos;s Blog</title>
    <updated>2020-07-14T07:02:24.188Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://liujinyang6.github.io"/>
    <link rel="self" href="https://liujinyang6.github.io/atom.xml"/>
    <logo>https://liujinyang6.github.io/images/avatar.png</logo>
    <icon>https://liujinyang6.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, Liu jinyang&apos;s Blog</rights>
    <entry>
        <title type="html"><![CDATA[è‡ªåŠ¨åŒ–æµ‹è¯•---selenium]]></title>
        <id>https://liujinyang6.github.io/post/zi-dong-hua-ce-shi-selenium/</id>
        <link href="https://liujinyang6.github.io/post/zi-dong-hua-ce-shi-selenium/">
        </link>
        <updated>2020-07-10T09:26:58.000Z</updated>
        <content type="html"><![CDATA[<h3 id="ä¸€-å‰è¨€">ä¸€ã€å‰è¨€</h3>
<p>è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼š</p>
<p>åŠŸèƒ½ï¼ˆUIï¼‰è‡ªåŠ¨åŒ–----QTPã€seleniumã€appium</p>
<p>æ€§èƒ½è‡ªåŠ¨åŒ–----Loadrunnerã€Jmeter</p>
<p>æ¥å£è‡ªåŠ¨åŒ–----jmeterã€postmanã€souapuiã€Pythonã€java</p>
<hr>
<h3 id="äºŒ-webè‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»·å€¼">äºŒã€webè‡ªåŠ¨åŒ–æµ‹è¯•çš„ä»·å€¼</h3>
<p>1ï¼‰ è‡ªåŠ¨åŒ–æµ‹è¯•æé«˜æ•ˆç‡ï¼Œç¼©çŸ­æµ‹è¯•å·¥ä½œæ—¶é—´<br>
2ï¼‰ è‡ªåŠ¨åŒ–æµ‹è¯•å’Œäººå·¥æµ‹è¯•ç›¸æ¯”ï¼Œæ¯ä¸€æ¬¡æµ‹è¯•æ‰§è¡Œçš„æ“ä½œæ—¶å›ºå®šçš„ï¼Œéå¸¸å¯é <br>
3ï¼‰ è‡ªåŠ¨åŒ–æµ‹è¯•èƒ½åŠ å¤§æ¯ä¸€è½®å›å½’çš„åŠ›åº¦ï¼Œæé«˜æµ‹è¯•çš„è¦†ç›–ç‡<br>
4ï¼‰ è‡ªåŠ¨åŒ–æµ‹è¯•å…·å¤‡æ›´å¥½çš„é‡ç°è½¯ä»¶ç¼ºé™·çš„èƒ½åŠ›ï¼Œå…·æœ‰å¾ˆå¼ºçš„ä¸€è‡´æ€§å’Œå¯é‡å¤æ€§</p>
<hr>
<h3 id="ä¸‰-å¼€å±•è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ¡ä»¶">ä¸‰ã€å¼€å±•è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ¡ä»¶</h3>
<p>1ã€æ‰‹å·¥æµ‹è¯•æ— æ³•å®Œæˆï¼Œéœ€è¦æŠ•å…¥å¤§é‡çš„æ—¶é—´å’ŒäººåŠ›</p>
<p>2ã€éœ€æ±‚å˜æ›´ä¸é¢‘ç¹ï¼Œæ¯”è¾ƒç¨³å®š</p>
<p>3ã€é¡¹ç›®å‘¨æœŸè¶³å¤Ÿé•¿</p>
<p>4ã€è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬å¯å¤ç”¨</p>
<p>5ã€æ‰‹å·¥æµ‹è¯•åŸºæœ¬é€šè¿‡</p>
<hr>
<h3 id="å››-è‡ªåŠ¨åŒ–æµ‹è¯•çš„åŸç†">å››ã€è‡ªåŠ¨åŒ–æµ‹è¯•çš„åŸç†</h3>
<p><strong>æ‰‹å·¥æ‰§è¡Œç”¨ä¾‹ï¼š</strong></p>
<p>1ã€æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ç›®æ ‡ç½‘å€</p>
<p>2ã€ç‚¹å‡»ç™»å½•ï¼Œè¿›å…¥ç™»é™†é¡µé¢</p>
<p>3ã€è¾“å…¥ç”¨æˆ·å</p>
<p>4ã€è¾“å…¥å¯†ç </p>
<p>5ã€ç‚¹å‡»ç™»å½•</p>
<p>6ã€éªŒè¯ç™»é™†æˆåŠŸ</p>
<p><strong>è‡ªåŠ¨åŒ–æ‰§è¡Œç”¨ä¾‹ï¼š</strong></p>
<p>1ã€è°ƒç”¨APIå‡½æ•°ï¼ˆwebdriverï¼‰å¯åŠ¨æµè§ˆå™¨ï¼Œä½¿ç”¨getæ–¹æ³•è®¿é—®ç›®æ ‡ç½‘å€</p>
<p>2ã€é€šè¿‡å®šä½ç›®æ ‡å¯¹è±¡çš„å±æ€§ï¼Œä½¿ç”¨clickæ“ä½œæ–¹æ³•</p>
<p>3ã€é€šè¿‡å®šä½ç›®æ ‡å¯¹è±¡çš„å±æ€§ï¼Œä½¿ç”¨send_keysæ“ä½œæ–¹æ³•</p>
<p>4ã€é€šè¿‡å®šä½ç›®æ ‡å¯¹è±¡çš„å±æ€§ï¼Œä½¿ç”¨send_keysæ“ä½œæ–¹æ³•</p>
<p>5ã€é€šè¿‡å®šä½ç›®æ ‡å¯¹è±¡çš„å±æ€§ï¼Œä½¿ç”¨clickæ“ä½œæ–¹æ³•</p>
<p>6ã€ä½¿ç”¨æ–­è¨€å‡½æ•°ï¼ˆæ¯”è¾ƒå‡½æ•°ï¼‰ï¼Œåˆ¤æ–­æ˜¯å¦ç™»å½•æˆåŠŸ</p>
<hr>
<h3 id="äº”-python-seleniumè‡ªåŠ¨åŒ–æµ‹è¯•ç¯å¢ƒæ­å»º">äº”ã€Python-seleniumè‡ªåŠ¨åŒ–æµ‹è¯•ç¯å¢ƒæ­å»º</h3>
<p>1ã€ å…·å¤‡Python3ç¯å¢ƒ</p>
<p>2ã€ä½¿ç”¨pipå®‰è£…selenium</p>
<p>éªŒè¯Python-seleniumç¯å¢ƒï¼š</p>
<p>åœ¨å¼€å‘å·¥å…·ä¸­è¾“å…¥<code>from selenium import webdriver</code>ä¸æŠ¥é”™å³å¯</p>
<p><strong>webdriver</strong>æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ç›¸å½“äºä¸€ä¸ªåº“ï¼Œæä¾›å‡½æ•°ä½¿ç”¨ï¼Œseleniumé›†æˆAPIç¼–ç¨‹æ¥å£ï¼Œä¸ºåŠ¨æ€ç½‘é¡µæä¾›è‰¯å¥½çš„webèƒ½åŠ›</p>
<p>æµè§ˆå™¨é©±åŠ¨ä¸‹è½½ç›®å½•ï¼šhttp://chromedriver.storage.googleapis.com/index.html</p>
<ul>
<li>æ³¨æ„ï¼šå¦‚æœæ‰¾ä¸åˆ°å¯¹åº”çš„ç‰ˆæœ¬ï¼Œå°±æ‰¾ä¸€ä¸ªæœ€ç›¸è¿‘çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½</li>
</ul>
<p>é©±åŠ¨æ”¾ç½®ç›®å½•ï¼š</p>
<p>1-ç›®æ ‡æµè§ˆå™¨çš„å®‰è£…ç›®å½•ä¸‹ï¼›</p>
<p>2-pythonçš„å®‰è£…ç›®å½•ä¸‹ï¼›</p>
<p>3-é€šè¿‡æŒ‡å®šè·¯å¾„çš„å†™æ³•</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-python">driver_path = r'C:\User\Liu\AppData\Local\webdriver\chromedriver.exe'

dirver = webdriver.Chrome(executable_path = driver_path)
</code></pre>
<hr>
<h3 id="å…­-seleniumwebdriverè„šæœ¬ç¼–å†™">å…­ã€seleniumâ€”webdriverè„šæœ¬ç¼–å†™</h3>
<h4 id="æµè§ˆå™¨æ“ä½œå‡½æ•°">æµè§ˆå™¨æ“ä½œå‡½æ•°</h4>
<p><code>driver=webdriver.Chrome()</code>--------------------å¯åŠ¨æµè§ˆå™¨ï¼ˆç¬¬ä¸€ä¸ªå­—æ¯å¿…é¡»å¤§å†™ï¼‰</p>
<p><code>driver.maximize_window()</code>----------------------æœ€å¤§åŒ–æµè§ˆå™¨</p>
<p><code>driver.minimize_window()</code>-----------------------æœ€å°åŒ–æµè§ˆå™¨</p>
<p><code>driver.back()</code>---------------------------------åé€€</p>
<p><code>driver.forward()</code>------------------------------å‰è¿›</p>
<p><code>driver.quit()</code>---------------------------------å…³é—­æµè§ˆå™¨</p>
<p><code>driver.close()</code>--------------------------------å…³é—­æµè§ˆå™¨</p>
<p><code>drvier.refresh()</code>------------------------------åˆ·æ–°æµè§ˆå™¨</p>
<p><code>driver.get(url)</code>-------------------------------è®¿é—®ç›®æ ‡ç½‘å€</p>
<p><code>time.sleep(4)</code>----------------å‰æå¯¼å…¥--------import time</p>
<ul>
<li>æ³¨ï¼š</li>
</ul>
<p>1.quité€€å‡ºä¸”å…³é—­æ‰€æœ‰æœ‰å…³è”çš„çª—å£ï¼Œcloseæ˜¯å…³é—­å½“å‰çš„çª—å£</p>
<p>2.driver.get(url)ä¸­çš„urlå¿…é¡»ç”¨httpå¼€å¤´</p>
<h4 id="å…ƒç´ å®šä½æ–¹å¼">å…ƒç´ å®šä½æ–¹å¼</h4>
<p>id ---------------------------------<code>find_element_by_id(id)</code></p>
<p>class ----------------------------<code>find_element_by_class_name(class)</code></p>
<p>name ---------------------------<code>find_element_by_name(name)</code></p>
<p>link_text ------------------------<code>find_element_by_link_text(link_text)</code></p>
<p>partial_link_text --------------<code>find_element_by_partial_link_text(link_text)</code></p>
<p>tag_name----------------------<code>find_element_by_tag_name(tag_name)</code></p>
<p>xpath ---------------------------<code>find_element_by_xpath(xpath)</code></p>
<p>css ------------------------------<code>find_element_by_css_selector(css_selector)</code></p>
<h4 id="æ“ä½œæ–¹æ³•">æ“ä½œæ–¹æ³•</h4>
<p><code>click()</code>----------------------------ç‚¹å‡»---å¼ºè°ƒäº‹ä»¶çš„ç‹¬ç«‹æ€§</p>
<p><code>send_keys(â€˜xxxâ€™)</code>-----------------åœ¨è¾“å…¥æ¡†å†…è¾“å…¥xxx</p>
<p><code>clear()</code>----------------------------æ¸…ç©ºç›®æ ‡å¯¹è±¡ä¸Šçš„å†…å®¹</p>
<p><code>submit()</code>---------------------------æäº¤---å¼ºè°ƒå¯¹è¡¨å•å†…å®¹çš„æäº¤</p>
<p><code>text</code>-------------------------------è·å–ç›®æ ‡å¯¹è±¡ä¸Šçš„æ–‡æœ¬ä¿¡æ¯</p>
<ul>
<li>æ³¨ï¼š</li>
</ul>
<p>ç”±äºè„šæœ¬æ‰§è¡Œé€Ÿåº¦è¿‡å¿«ï¼Œå¯¼è‡´ä¸€äº›æ­¥éª¤æ‰§è¡Œå¤±è´¥ï¼Œå› ä¸ºé¡µé¢å…ƒç´ å°šæœªæ¸²æŸ“å®Œæˆï¼Œè„šæœ¬æ— æ³•å®šä½è¯¥å¯¹è±¡ï¼Œå›ºåœ¨è„šæœ¬æ­¥éª¤ä¸­æ·»åŠ ä¸€äº›å¿…è¦çš„æ—¶é—´ç­‰å¾…ã€‚</p>
<h4 id="ç­‰å¾…å‡½æ•°">ç­‰å¾…å‡½æ•°</h4>
<p><code>driver.implicitly_wait(3)</code>----------------<strong>æ™ºèƒ½ç­‰å¾…</strong>ï¼Œå¦‚æœ3så†…å…ƒç´ å·²æ¸²æŸ“å®Œæˆï¼Œå‰©ä¸‹çš„æ—¶é—´ä¸å†ç­‰å¾…ï¼Œè‹¥æ²¡æœ‰æ¸²æŸ“å®Œæˆï¼Œæœ€å¤§ç­‰å¾…æ—¶é—´å°±ä¸º3sï¼Œå¯¹å…¨å±€è„šæœ¬å‡æœ‰æ•ˆ</p>
<p><code>time.sleep(3)</code>----------------<strong>å¼ºåˆ¶ç­‰å¾…</strong>ï¼Œæ— è®º3så†…å…ƒç´ æ˜¯å¦æ¸²æŸ“å®Œæˆï¼Œéƒ½è¦å¼ºåˆ¶ç­‰å¾…3sï¼Œå¯¹å±€éƒ¨è„šæœ¬æœ‰æ•ˆ</p>
<hr>
<h3 id="ä¸ƒ-å…ƒç´ å®šä½">ä¸ƒã€å…ƒç´ å®šä½</h3>
<h4 id="xpathå®šä½">Xpathå®šä½</h4>
<p>â€‹		XPathå³ä¸ºXMLè·¯å¾„è¯­è¨€ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨æ¥ç¡®å®šXMLï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€çš„å­é›†ï¼‰æ–‡æ¡£ä¸­æŸéƒ¨åˆ†ä½ç½®çš„è¯­è¨€ã€‚XPathåŸºäºXMLçš„æ ‘çŠ¶ç»“æ„ï¼Œæä¾›åœ¨æ•°æ®ç»“æ„æ ‘ä¸­æ‰¾å¯»èŠ‚ç‚¹çš„èƒ½åŠ›ã€‚èµ·åˆ XPath çš„æå‡ºçš„åˆè¡·æ˜¯å°†å…¶ä½œä¸ºä¸€ä¸ªé€šç”¨çš„ã€ä»‹äºXPointerä¸XSLTé—´çš„è¯­æ³•æ¨¡å‹ã€‚ä½†æ˜¯ XPath å¾ˆå¿«çš„è¢«å¼€å‘è€…é‡‡ç”¨æ¥å½“ä½œå°å‹æŸ¥è¯¢è¯­è¨€ã€‚</p>
<p>Xpathè·å–æ–¹å¼ï¼š</p>
<p>1ï¼‰ F12å¼€å‘è€…å·¥å…·ï¼Œå³é”®å¤åˆ¶Xpathè·¯å¾„</p>
<p>2ï¼‰æ‰‹åŠ¨ç¼–å†™</p>
<ul>
<li>
<p>â€‹	çº¯æ ‡ç­¾è·¯å¾„ï¼š <strong>position</strong></p>
<p>ç»å¯¹è·¯å¾„ï¼š<code>/html/body/div/div[3]/div[2]/form/input</code></p>
<p>ç›¸å½“è·¯å¾„ï¼š<code>//div[2]/form/input</code></p>
</li>
<li>
<p>â€‹    æ ‡ç­¾å’Œå±æ€§ç»“åˆ: <strong>attribute</strong></p>
<p>è¯­æ³•ï¼š//æ ‡ç­¾å[@å±æ€§=å±æ€§å€¼]</p>
<p>ç¤ºä¾‹ï¼š</p>
<p><code>//input[@id=â€™wordâ€™]</code></p>
<p><code>//form/input[@id=â€™wordâ€™]</code>----æ ‡ç­¾å¯ä»¥æœ‰å¤šä¸ªï¼Œä¹Ÿå¯ä»¥åªæœ‰ä¸€ä¸ª</p>
<p><code>//div[@class='hotwords']/a[1]&quot;</code>---ä¹Ÿå¯åˆ©ç”¨ä¸Šå±‚æ ‡ç­¾çš„å±æ€§è¿›è¡Œå®šä½</p>
</li>
</ul>
<p>å‚è€ƒxpathé€‰æ‹©å™¨å†™æ³•ï¼šhttps://www.w3school.com.cn/xpath/xpath_syntax.asp</p>
<h4 id="csså®šä½">Csså®šä½</h4>
<p>â€‹		å±‚å æ ·å¼è¡¨æ˜¯ä¸€ç§ç”¨æ¥è¡¨ç°HTMLï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€çš„ä¸€ä¸ªåº”ç”¨ï¼‰æˆ–XMLï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€çš„ä¸€ä¸ªå­é›†ï¼‰ç­‰æ–‡ä»¶æ ·å¼çš„è®¡ç®—æœºè¯­è¨€ã€‚</p>
<p>â€‹		CSSç›®å‰æœ€æ–°ç‰ˆæœ¬ä¸ºCSS3ï¼Œæ˜¯èƒ½å¤ŸçœŸæ­£åšåˆ°ç½‘é¡µè¡¨ç°ä¸å†…å®¹åˆ†ç¦»çš„ä¸€ç§æ ·å¼è®¾è®¡è¯­è¨€ã€‚ç›¸å¯¹äºä¼ ç»ŸHTMLçš„è¡¨ç°è€Œè¨€ï¼ŒCSSèƒ½å¤Ÿå¯¹ç½‘é¡µä¸­çš„å¯¹è±¡çš„ä½ç½®æ’ç‰ˆè¿›è¡Œåƒç´ çº§çš„ç²¾ç¡®æ§åˆ¶ï¼Œæ”¯æŒå‡ ä¹æ‰€æœ‰çš„å­—ä½“å­—å·æ ·å¼ï¼Œæ‹¥æœ‰å¯¹ç½‘é¡µå¯¹è±¡å’Œæ¨¡å‹æ ·å¼ç¼–è¾‘çš„èƒ½åŠ›ï¼Œå¹¶èƒ½å¤Ÿè¿›è¡Œåˆæ­¥äº¤äº’è®¾è®¡ï¼Œæ˜¯ç›®å‰åŸºäºæ–‡æœ¬å±•ç¤ºæœ€ä¼˜ç§€çš„è¡¨ç°è®¾è®¡è¯­è¨€ã€‚CSSèƒ½å¤Ÿæ ¹æ®ä¸åŒä½¿ç”¨è€…çš„ç†è§£èƒ½åŠ›ï¼Œç®€åŒ–æˆ–è€…ä¼˜åŒ–å†™æ³•ï¼Œé’ˆå¯¹å„ç±»äººç¾¤ï¼Œæœ‰è¾ƒå¼ºçš„æ˜“è¯»æ€§ã€‚</p>
<p>CSSè·å–æ–¹å¼ï¼š</p>
<p>1ï¼‰ F12å¼€å‘è€…å·¥å…·ï¼Œå³é”®å¤åˆ¶CSSè·¯å¾„</p>
<p>2ï¼‰æ‰‹åŠ¨ç¼–å†™</p>
<ul>
<li>
<p>æ ‡ç­¾å’Œå±æ€§ç»„åˆï¼šæ ‡ç­¾å[å±æ€§å=å±æ€§å€¼]</p>
<p>----æ ‡ç­¾åå¯ä»¥å¤šä¸ªï¼Œå¤šä¸ªæ—¶éœ€è¦ç”¨ç©ºæ ¼éš”å¼€ï¼š<code>form input.text</code></p>
<p>----å±æ€§å¯ä»¥éšæ„ï¼š<code>input[type='text']&quot;</code></p>
<p>ç¤ºä¾‹ï¼š<code>Input[class=â€™xxxâ€™]</code></p>
</li>
<li>
<p>æ³¨æ„ï¼š</p>
<p>class/idé™¤äº†å¯ä»¥é‡‡ç”¨[å±æ€§=å±æ€§å€¼]çš„å†™æ³•ï¼Œè¿˜å¯ä»¥ç”¨ä¸“ç”¨å†™æ³•ï¼Œ</p>
<p>é€šè¿‡classç¼–å†™ï¼š<code>æ ‡ç­¾å.classçš„å±æ€§å€¼</code></p>
<p>é€šè¿‡idç¼–å†™ï¼š<code>æ ‡ç­¾å#idçš„å€¼</code></p>
<p>ç»„åˆ ï¼š<code>æ ‡ç­¾å#idå€¼.classå€¼</code></p>
</li>
</ul>
<p>å‚è€ƒcssé€‰æ‹©å™¨å†™æ³•é“¾æ¥ï¼šhttps://www.w3school.com.cn/cssref/css_selectors.asp</p>
<h4 id="å¤šçª—å£æˆ–æ¡†æ¶å†…å®šä½">å¤šçª—å£æˆ–æ¡†æ¶å†…å®šä½</h4>
<h5 id="åˆ‡æ¢æ¡†æ¶">åˆ‡æ¢æ¡†æ¶</h5>
<p>æ¡†æ¶ä¸­çš„å…ƒç´ æ— æ³•å®šä½æ—¶éœ€è¦åˆ‡æ¢åˆ°æ¡†æ¶ä¸­åœ¨è¿›è¡Œå®šä½ï¼Œä¸”å‹¿å¿˜è®°è·³å‡ºæ¡†æ¶</p>
<p>å‡½æ•°ï¼š</p>
<p><code>driver.switch_to.frame(&quot;xx&quot;)</code>--------è¿›å…¥æ¡†æ¶ï¼ˆå¯ç”¨æ¡†æ¶çš„id/name/indexï¼Œä¹Ÿå¯ç”¨å…¶ä»–å®šä½æ–¹å¼ï¼‰</p>
<p><code>switch_to.default_content()</code>--------è·³å‡ºæ¡†æ¶ï¼ˆè·³å‡ºæœ€è¿‘è¿›å…¥çš„æ¡†æ¶ï¼‰</p>
<p>â€‹	ç¤ºä¾‹ï¼š</p>
<pre><code class="language-python">id = &quot;abc&quot;

driver.switch_to.frame(&quot;abc&quot;)

name = &quot;auto&quot;

driver.switch_to.frame(&quot;auto&quot;)
</code></pre>
<h5 id="åˆ‡æ¢çª—å£">åˆ‡æ¢çª—å£</h5>
<p>å½“æµ‹è¯•é¡µé¢åŒæ—¶å‡ºç°2ä¸ªæˆ–è€…ä»¥ä¸Šçª—å£æ—¶å€™ï¼Œè€Œä¸”æ–°æ‰“å¼€çš„windowæœ‰name,å¯ä»¥ä½¿ç”¨<code>driver.switch_to_window(winHandleID)</code>æ¥è¿›è¡Œåˆ‡æ¢ï¼Œå¦‚æœçª—å£æ²¡æœ‰nameï¼Œåˆ™éœ€è¦é€šè¿‡å®šä½æµè§ˆå™¨å¥æŸ„æ¥åŒºåˆ†æµè§ˆå™¨çª—å£ï¼Œç„¶åå†æ ¹æ®å¥æŸ„è¿›å…¥ä¸åŒçš„æµè§ˆå™¨çª—å£</p>
<p>å‡½æ•°ï¼š</p>
<p><code>driver.switch_to.window(winHandleID)</code>-------------æ ¹æ®çª—å£nameæˆ–å¥æŸ„è¿›å…¥ä¸‹ä¸€ä¸ªçª—å£</p>
<p><code>driver.current_window_handle</code>  -------------è·å–å½“å‰çª—å£å¥æŸ„</p>
<p><code>driver.window_handles</code> -------------è·å–å½“å‰æ‰€æœ‰çª—å£çš„å¥æŸ„</p>
<ul>
<li>æ³¨æ„ï¼š</li>
</ul>
<p>1.å¯ä»¥é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼å®šä½åˆ°ç¬¬äºŒä¸ªçª—å£å¥æŸ„</p>
<pre><code class="language-python">#è·å–å½“å‰çª—å£å¥æŸ„
handle1 = driver.current_window_handle
	
#ç‚¹å‡»ä¸‹æ–¹çš„ä¸€å…ƒå¤šå®
driver.find_element_by_link_text(&quot;ä¸€å…ƒå¤ºå®&quot;).click()

all_handles = driver.window_handles
print(all_handles)

handle2 = all_handles[1]

#è¿›å…¥ç¬¬äºŒä¸ªçª—å£
driver.switch_to.window(handle2)

</code></pre>
<p>2.é€šè¿‡forå¾ªç¯çš„æ–¹å¼å®šä½åˆ°ä¸‹ä¸€ä¸ªçª—å£å¥æŸ„</p>
<pre><code class="language-python">#è·å¾—å½“å‰æ‰€æœ‰æ‰“å¼€çš„çª—å£çš„å¥æŸ„
all_handles = driver.window_handles

#è¿›å…¥æ³¨å†Œçª—å£
for handle in all_handles:
    if handle != handle1:
        driver.switch_to.window(handle2)

</code></pre>
<h4 id="æ¥å—å¼¹çª—">æ¥å—å¼¹çª—</h4>
<p><code>driver.switch_to_alert().xx</code>  ---------æ¥å—å¼¹å‡ºçª—å£</p>
<p>åæ¥æ–¹æ³•ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-8841840"> <code>text</code><label class="task-list-item-label" for="task-item-8841840"> ``` text``` ï¼šè¿”å› alert/confirm/prompt ä¸­çš„æ–‡å­—ä¿¡æ¯ã€‚</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-3234660"> <code>accept</code><label class="task-list-item-label" for="task-item-3234660"> ```accept```ï¼šç‚¹å‡»ç¡®è®¤æŒ‰é’®ã€‚</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-9061960"> <code>dismiss</code><label class="task-list-item-label" for="task-item-9061960"> ```dismiss ```ï¼šç‚¹å‡»å–æ¶ˆæŒ‰é’®ï¼Œå¦‚æœæœ‰çš„è¯</label></li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-python">driver = webdriver.Firefox()
driver.maximize_window()
driver.implicitly_wait(10)
driver.get('http://www.baidu.com')


# æ‰“å¼€æœç´¢è®¾ç½®
#driver.find_element_by_xpath('//div[@id=&quot;lg&quot;]').click()
driver.find_element_by_class_name('setpref').click()

# ä¿å­˜è®¾ç½®
driver.find_element_by_link_text(u'ä¿å­˜è®¾ç½®').click()

time.sleep(3)

# æ¥æ”¶å¼¹çª—
driver.switch_to_alert().accept()

time.sleep(5)

driver.quit()

</code></pre>
<h4 id="é¼ æ ‡æ‚¬åœ">é¼ æ ‡æ‚¬åœ</h4>
<pre><code class="language-python">from selenium.webdriver.common.action_chains import ActionChains
â€¦â€¦

# æ³¨æ„ï¼šä½¿ç”¨è¯¥æ–¹æ³•éœ€è¦å…ˆå¯¼å…¥åŒ…
# é¼ æ ‡æ‚¬åœç›¸â€œè®¾ç½®â€é“¾æ¥
link = driver.find_element_by_link_text(u'è®¾ç½®')

ActionChains(driver).move_to_element(link).perform()

#ç»§ç»­ç‚¹å‡»å³å¯

</code></pre>
<h4 id="ä¸‹æ‹‰èœå•çš„å®šä½æ–¹å¼">ä¸‹æ‹‰èœå•çš„å®šä½æ–¹å¼</h4>
<p>å…ˆå®šä½ä¸‹æ‹‰æ¡†ä½œä¸ºä¸€ä¸ªå¯¹è±¡nï¼Œç„¶åå†æ ¹æ®valueå€¼å®šä½è¯¥å…·ä½“çš„é€‰é¡¹ã€‚</p>
<pre><code class="language-python"># é€‰æ‹©çœä»½
n=driver.find_element_by_id(&quot;province&quot;)

n.find_element_by_xpath(&quot;//option[@value='10']&quot;).click()	


</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Loadrunnerè„šæœ¬å¸¸ç”¨å‡½æ•°]]></title>
        <id>https://liujinyang6.github.io/post/loadrunner-jiao-ben-chang-yong-han-shu/</id>
        <link href="https://liujinyang6.github.io/post/loadrunner-jiao-ben-chang-yong-han-shu/">
        </link>
        <updated>2020-07-10T06:23:06.000Z</updated>
        <content type="html"><![CDATA[<h3 id="web_url">web_url()</h3>
<p>ä½œç”¨ï¼šæ¨¡æ‹Ÿæµè§ˆå™¨å‘å‡ºè®¿é—®ç›®æ ‡ç½‘å€çš„è¯·æ±‚=get è¯·æ±‚</p>
<p>è¯­æ³•ï¼šWeb_url(â€œæ­¥éª¤åç§°â€,â€œurl=httpï¼š//xxxxxâ€,LAST);</p>
<p>eg:</p>
<p>web_url(â€œè®¿é—® baiduâ€ï¼Œâ€œurl=http://www.baidu.comâ€ï¼ŒLAST);</p>
<hr>
<h3 id="web_submit_data">Web_submit_data()</h3>
<p>ä½œç”¨ï¼šå‘æœåŠ¡å™¨æäº¤è¡¨å•æ•°æ®,æ”¯æŒ post å’Œ get æ–¹æ³•</p>
<hr>
<h3 id="web_custom_request">web_custom_request()</h3>
<p>ä½œç”¨ï¼šè‡ªå®šä¹‰å‘æœåŠ¡å™¨å‘é€ httpè¯·æ±‚ï¼Œæ”¯æŒçš„ä»»æ„æ–¹æ³•çš„è¯· æ±‚ï¼Œå¯ä»¥ä»£æ›¿<code>web_url</code> å’Œ <code>web_submit_data</code> å‡½æ•°</p>
<hr>
<h3 id="web_reg_save_param">web_reg_save_param()</h3>
<p>ä½œç”¨ï¼šé€šè¿‡ç›®æ ‡å¯¹è±¡çš„å·¦å³è¾¹ç•Œè·å–æœåŠ¡å™¨è¿”å›çš„åŠ¨æ€æ•°æ®</p>
<p>æ–¹æ³•ï¼šå·¥å…·æ â†’insertâ†’new step è¾“å…¥ <code>web_reg_save_param</code>ï¼Œç‚¹å‡»ç¡®å®š</p>
<p>æ­¥éª¤ï¼š</p>
<p>1ã€ ç¡®å®šéœ€è¦å…³è”çš„å¯¹è±¡ï¼ˆåŠ¨æ€çš„ã€å˜åŒ–çš„ï¼ŒæœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯çš„ï¼‰</p>
<p>2ã€ ä½¿ç”¨ httpwatch/fiddler æŠ“å–ç›®æ ‡å¯¹è±¡ï¼Œæ¥ç¡®å®šè¯¥æ•°æ®æ˜¯ç”±å“ªä¸ªè¯·æ±‚äº§ç”Ÿçš„</p>
<p>3ã€ è·å–ç›®æ ‡å¯¹è±¡çš„å·¦å³è¾¹ç•Œï¼ŒåŠè¯·æ±‚çš„ä½ç½®</p>
<p>4ã€ å¡«å†™å…³è”å‡½æ•°çš„å‚æ•°åç§°ï¼Œå·¦å³è¾¹ç•Œã€æŸ¥æ‰¾æ•°ã€æŸ¥æ‰¾ä½ç½®</p>
<p>5ã€ ç”¨è¯¥å‚æ•°åæ›¿æ¢éœ€è¦å‘æœåŠ¡å™¨æäº¤çš„åŠ¨æ€æ•°æ®ï¼Œå¼•ç”¨å‚æ•°ï¼š{å‚æ•°å}</p>
<ul>
<li>æ³¨æ„ï¼šä»åç§°ä¸ŠçŸ¥é“å…³è”å‡½æ•°æ˜¯<code>æ³¨å†Œå‹</code>å‡½æ•°ï¼Œæ‰€ä»¥åº”è¯¥æ”¾åœ¨äº§ç”ŸåŠ¨æ€æ•°æ®è¯·æ±‚çš„å‰é¢ï¼Œsave_param è¡¨ç¤ºå…³è”å‡½æ•°è·å–ä¸‹æ¥ä¹‹åä¿å­˜ä¸ºä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥è„šæœ¬ä¸­å¼•ç”¨æ—¶åº”è¯¥åŠ {} ã€‚</li>
</ul>
<hr>
<h3 id="æ•°ç»„æ“ä½œ">æ•°ç»„æ“ä½œ</h3>
<pre><code class="language-c">//è¿”å›å‚æ•°æ•°ç»„æŒ‡å®šä½ç½®çš„å‚æ•°çš„å€¼  
lr_paramarr_idx(&quot;Did&quot;,1);  

//è¿”å›å‚æ•°æ•°ç»„çš„å…ƒç´ ï¼ˆå‚æ•°ï¼‰çš„ä¸ªæ•°  
lr_paramarr_len(&quot;Did&quot;);  

//è¿”å›å‚æ•°æ•°ç»„éšæœºä½ç½®çš„å‚æ•°çš„å€¼  
lr_paramarr_random(&quot;Did&quot;); 
</code></pre>
<hr>
<h3 id="lr_think_time">lr_think_timeï¼ˆï¼‰</h3>
<p>ä½œç”¨ï¼šç­‰å¾…nç§’</p>
<p>ç”¨æ³•ï¼šlr_think_timeï¼ˆnï¼‰</p>
<hr>
<h3 id="äº‹åŠ¡å‡½æ•°">äº‹åŠ¡å‡½æ•°</h3>
<p>å¼€å§‹äº‹åŠ¡ï¼šlr_start_transaction(&quot;open&quot;);</p>
<p>ç»“æŸäº‹åŠ¡ï¼šlr_end_transaction(&quot;open&quot;, LR_AUTO);</p>
<p>äº‹åŠ¡æ—¶é—´=å“åº”æ—¶é—´+æ€è€ƒæ—¶é—´+æµªè´¹æ—¶é—´+å‡½æ•°è‡ªèº«æ‰§è¡Œæ—¶é—´ï¼ŒæŒ‡çš„æ˜¯å®¢æˆ·ç«¯å‘å‡ºè¯· æ±‚åˆ°å¾—åˆ°å“åº”çš„æ•´ä¸ªè¿‡ç¨‹æ‰€ç»å†çš„æ—¶é—´ã€‚</p>
<p>äº‹åŠ¡çš„å››ç§çŠ¶æ€ï¼š<code>LR_AUTO</code>,<code>LR_STOP</code>,<code>LR_PASS</code>,<code>LR_FAIL</code></p>
<p>LR_AUTO: ç³»ç»Ÿè‡ªåŠ¨åˆ¤æ–­ä¾èµ– http è¿”å›çš„çŠ¶æ€ç ,çŠ¶æ€ç ä¸º200äº‹åŠ¡å°±é€šè¿‡</p>
<hr>
<h3 id="æ£€æŸ¥ç‚¹å‡½æ•°">æ£€æŸ¥ç‚¹å‡½æ•°</h3>
<p>æ–‡æœ¬æ£€æŸ¥ç‚¹å‡½æ•°ï¼Œä¼˜å…ˆä½¿ç”¨</p>
<p>Web_reg_find()</p>
<ul>
<li>æ³¨æ„ï¼šä»åç§°ä¸ŠçŸ¥é“å…³è”å‡½æ•°æ˜¯<code>æ³¨å†Œå‹</code>å‡½æ•°ï¼Œæ‰€ä»¥åº”è¯¥æ”¾åœ¨æ£€æŸ¥æ•°æ®è¯·æ±‚çš„å‰é¢</li>
</ul>
<hr>
<h3 id="lr_eval_string">lr_eval_string()</h3>
<p>ä½œç”¨ï¼šå–å‡ºå‚æ•°çš„å€¼</p>
<p>è¯­æ³•ï¼šlr_eval_string(â€œ<code>{å‚æ•°å}</code>â€)</p>
<hr>
<h3 id="lr_save_string">lr_save_string()</h3>
<p>ä½œç”¨ï¼šä¿å­˜å­—ç¬¦ä¸²åˆ°ä¸€ä¸ªå‚æ•°</p>
<p>è¯­æ³•ï¼šlr_save_string(â€œ<code>value</code>â€ï¼Œ<code>å‚æ•°å</code>);</p>
<hr>
<h3 id="lr_output_message">lr_output_message()</h3>
<p>ä½œç”¨ï¼šåœ¨æ§åˆ¶å°æ‰“å°ä¿¡æ¯</p>
<hr>
<h3 id="ç±»å‹è½¬åŒ–">ç±»å‹è½¬åŒ–</h3>
<p><code>atoi()</code>ï¼šå°†å­—ç¬¦ä¸²ç±»å‹è½¬ä¸ºæ•´å‹</p>
<p><code>itoa()</code>ï¼šå°†æ•´å‹è½¬ä¸ºå­—ç¬¦ä¸²ç±»å‹</p>
<hr>
<h3 id="lr_rendezvous">lr_rendezvous()</h3>
<p>ä½œç”¨ï¼šè®¾ç½®é›†åˆç‚¹</p>
<p>ç”¨æ³•ï¼šlr_rendezvous(&quot;é›†åˆç‚¹åç§°&quot;);</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Loadrunnerè„šæœ¬ç¼–å†™ç»ƒä¹ ]]></title>
        <id>https://liujinyang6.github.io/post/loadrunner-jiao-ben-bian-xie-lian-xi/</id>
        <link href="https://liujinyang6.github.io/post/loadrunner-jiao-ben-bian-xie-lian-xi/">
        </link>
        <updated>2020-07-10T03:40:52.000Z</updated>
        <content type="html"><![CDATA[<h3 id="å‚æ•°å…³è”-æ£€æŸ¥ç‚¹è®¾ç½®">å‚æ•°å…³è”ã€æ£€æŸ¥ç‚¹è®¾ç½®</h3>
<pre><code class="language-c">Action()
{	
	int i;

	// è·å–åŠ¨æ€sessionid
	web_reg_save_param(&quot;sessionid&quot;,
		&quot;LB=&lt;input type=hidden name=userSession value=&quot;,
		&quot;RB=&gt;&quot;,
		&quot;Ord=1&quot;,
		&quot;Search=All&quot;,
		LAST);



	web_url(&quot;index&quot;,&quot;URL=http://127.0.0.1:1080/WebTours/&quot;,LAST);

	// è®¾ç½®ç™»å½•æ£€æŸ¥ç‚¹
    
	web_reg_find(&quot;Search=All&quot;,
		&quot;SaveCount=checkcount&quot;,
		&quot;Text=liang01&quot;,
		LAST);

	lr_start_transaction(&quot;login&quot;);

	web_submit_data(&quot;web_submit_data&quot;,
		&quot;Action=http://127.0.0.1:1080/WebTours/login.pl&quot;,
		&quot;Method=POST&quot;,
		&quot;TargetFrame=&quot;,
		&quot;Referer=&quot;,
		ITEMDATA,
		&quot;Name=userSession&quot;, &quot;Value={sessionid}&quot;, ENDITEM,
		&quot;Name=username&quot;, &quot;Value=liang01&quot;, ENDITEM,
		&quot;Name=password&quot;, &quot;Value=123&quot;, ENDITEM,
		LAST);
    
	// å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºint
    
	i = atoi(lr_eval_string(&quot;{checkcount}&quot;));

	if (i&gt;0) {

		lr_end_transaction(&quot;login&quot;,LR_PASS);

	}
	else{
		lr_end_transaction(&quot;login&quot;,LR_FAIL);
	}



	return 0;
}

</code></pre>
<hr>
<h3 id="å‚æ•°ä½¿ç”¨">å‚æ•°ä½¿ç”¨</h3>
<pre><code class="language-c">Action()
{
	
	//å°†å­—ç¬¦ä¸²&quot;test&quot;ä¿å­˜åä¸ºcanshuçš„å‚æ•°
	//å°†å€¼å­˜ä¸ºå‚æ•°
	lr_save_string(&quot;test&quot;,&quot;canshu&quot;);

 	lr_output_message(&quot;å‚æ•°çš„å€¼ä¸º:%s&quot;,lr_eval_string(&quot;{canshu}&quot;));

	lr_output_message(&quot;å‚æ•°çš„å€¼ä¸º:%s&quot;,lr_eval_string(&quot;{canshu}&quot;));
	
	//æå–canshuå‚æ•°çš„å€¼
	//å°†å€¼ä»å‚æ•°ä¸­å–å‡º
	lr_eval_string(&quot;{canshu}&quot;);
}
</code></pre>
<hr>
<h3 id="é«˜çº§å…³è”">é«˜çº§å…³è”</h3>
<pre><code class="language-c">Action()
{

    // å…³è”è·å–å¤§ç±»
	web_reg_save_param(&quot;Did&quot;,
		&quot;LB=categoryId=&quot;,
		&quot;RB=\&quot;&gt;&quot;,
		&quot;Ord=all&quot;,
		&quot;Search=All&quot;,
		LAST);


	// è®¿é—®é¦–é¡µ
	web_url(&quot;index&quot;,&quot;URL=http://127.0.0.1/pet/&quot;,LAST);

	// å°†ä¸€ä¸ªå­—ç¬¦ä¸²å®šä¹‰æˆä¸€ä¸ªå‚æ•°
	// éšæœºè·å–æ•°ç»„æŸä¸€å…ƒç´ çš„å€¼
	lr_save_string(lr_paramarr_random(&quot;Did&quot;),&quot;did&quot;);
	
	
	// æ ¹æ®ç´¢å¼•è·å¾—æ•°ç»„æŸä¸€å…ƒç´ çš„å€¼ 
    //lr_save_string(lr_paramarr_idx(&quot;Did&quot;,1),&quot;did&quot;);

	// éšæœºç‚¹å‡»å¤§ç±»
	web_url(&quot;catlog&quot;,&quot;URL=http://127.0.0.1/pet/Products.aspx?page=0&amp;categoryId={did}&quot;,LAST);

	return 0;
}

</code></pre>
<hr>
<h3 id="ç»ƒä¹ è„šæœ¬">ç»ƒä¹ è„šæœ¬ï¼š</h3>
<h4 id="æŒ‰é¡ºåºç‚¹å‡»è®¿é—®é¡µé¢">æŒ‰é¡ºåºç‚¹å‡»è®¿é—®é¡µé¢</h4>
<pre><code class="language-c">Action()
{
	int i;
	
	web_reg_save_param(&quot;fidarr&quot;,
		&quot;LB=forumdisplay&amp;fid=&quot;,
		&quot;RB=\&quot;&gt;&quot;,
		&quot;Ord=all&quot;,
		&quot;Search=All&quot;,
		LAST);

	
	web_url(&quot;index&quot;,&quot;URL=http://127.0.0.1:8888/discuz/upload/forum.php&quot;,LAST);


	for (i=1;i&lt;=5;i++) {
		
		lr_save_string(lr_paramarr_idx(&quot;fidarr&quot;,i*(int)2),&quot;fid&quot;);

		web_url(&quot;catalog&quot;,&quot;URL=http://127.0.0.1:8888/discuz/upload/forum.php?mod=forumdisplay&amp;fid={fid}&quot;,LAST);

	}


	return 0;
}

</code></pre>
<h4 id="éšæœºç™»å½•è´¦å·">éšæœºç™»å½•è´¦å·</h4>
<pre><code class="language-c">Action()
{
	int i = 0;

	web_url(&quot;discuz&quot;,&quot;URL=http://127.0.0.1:8888/discuz/upload/forum.php&quot;,LAST);
    


	lr_start_transaction(&quot;login&quot;);

	web_submit_data(&quot;login&quot;,
		&quot;Action=http://127.0.0.1:8888/discuz/upload/member.php?mod=logging&amp;action=login&amp;loginsubmit=yes&amp;infloat=yes&amp;lssubmit=yes&amp;inajax=1&quot;,
		&quot;Method=POST&quot;,
		&quot;TargetFrame=&quot;,
		&quot;Referer=&quot;,
		ITEMDATA,
		&quot;Name=fastloginfield&quot;, &quot;Value=username&quot;, ENDITEM,
		&quot;Name=username&quot;, &quot;Value={username}&quot;, ENDITEM,
		&quot;Name=password&quot;, &quot;Value=123&quot;, ENDITEM,
		&quot;Name=quickforward&quot;, &quot;Value=yes&quot;, ENDITEM,
		&quot;Name=handlekey&quot;, &quot;Value=ls&quot;, ENDITEM,
		LAST);

	

	web_reg_find(&quot;Search=All&quot;,
		&quot;SaveCount=namecount&quot;,
		&quot;Text={username}&quot;,
		LAST);


	web_url(&quot;discuz&quot;,&quot;URL=http://127.0.0.1:8888/discuz/upload/forum.php&quot;,LAST);


	i = atoi(lr_eval_string(&quot;{namecount}&quot;));

	
	if (i&gt;0) {
		lr_end_transaction(&quot;login&quot;,LR_PASS);
		lr_output_message(&quot;namecountçš„å€¼ä¸º%d,å‡ºç°æ¬¡æ•°å¤§äº0ï¼Œäº‹åŠ¡é€šè¿‡&quot;,i);
	}
	else{
		lr_end_transaction(&quot;login&quot;,LR_FAIL);
		lr_output_message(&quot;namecountçš„å€¼ä¸º%dï¼Œå‡ºç°æ¬¡æ•°ä¸º0ï¼Œäº‹åŠ¡å¤±è´¥&quot;,i);
	}
	


	return 0;
}

</code></pre>
<h4 id="éšæœºç‚¹å‡»ä»»æ„ä¸€ä¸ªå¤§ç±»å†é¡ºåºç‚¹å‡»å…¶ä¸‹çš„å°ç±»">éšæœºç‚¹å‡»ä»»æ„ä¸€ä¸ªå¤§ç±»ï¼Œå†é¡ºåºç‚¹å‡»å…¶ä¸‹çš„å°ç±»</h4>
<pre><code class="language-c">Action()
{
	int i;

	web_reg_save_param(&quot;catalog_Big&quot;,
	&quot;LB=hidCategoryId\&quot; value=\&quot;&quot;,
	&quot;RB=\&quot; /&gt;&lt;/td&gt;&quot;,
	&quot;Ord=all&quot;,
	&quot;Search=All&quot;,
	LAST);



	web_url(&quot;petshop&quot;,&quot;URL=http://127.0.0.1/pet/&quot;,LAST);


	lr_save_string(lr_paramarr_random(&quot;catalog_Big&quot;),&quot;catalog&quot;);

	
	
	web_reg_save_param(&quot;catalog_Small&quot;,
		&quot;LB=&lt;a href='Items.aspx?productId=&quot;,
		&quot;RB=&amp;categoryId=&quot;,
		&quot;Ord=all&quot;,
		&quot;Search=All&quot;,
		LAST);


	web_url(&quot;random_catalog_big&quot;,&quot;URL=http://127.0.0.1/pet/Products.aspx?page=0&amp;categoryId={catalog}&quot;,LAST);


	  for (i=1;i&lt;=4;i++) {
		//è·å–å°ç±»çš„catalogIdå¯¹åº”çš„å€¼
		 lr_save_string(lr_paramarr_idx(&quot;catalog_Small&quot;,i*(int)2),&quot;catalog_small&quot;);

		
		web_submit_data(&quot;web_submit_data&quot;,
			&quot;Action=http://127.0.0.1/pet/Items.aspx&quot;,
			&quot;Method=GET&quot;,
			&quot;TargetFrame=&quot;,
			&quot;Referer=&quot;,
			ITEMDATA,
			&quot;Name=productId&quot;, &quot;Value={catalog_small}&quot;, ENDITEM,
			&quot;Name=categoryId&quot;, &quot;Value={catalog}&quot;, ENDITEM,
			LAST);


	  }


	return 0;
}

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Appiumæ•™ç¨‹]]></title>
        <id>https://liujinyang6.github.io/post/appium-jiao-cheng/</id>
        <link href="https://liujinyang6.github.io/post/appium-jiao-cheng/">
        </link>
        <updated>2020-06-17T07:14:05.000Z</updated>
        <content type="html"><![CDATA[<h2 id="ä¸€-appiumä»‹ç»">ä¸€ã€Appiumä»‹ç»</h2>
<p><code>Appium</code>æ˜¯ä¸€æ¬¾å¼€æºçš„è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œå…¶æ”¯æŒ iOSå’Œå®‰å“å¹³å°ä¸Šçš„åŸç”Ÿçš„ï¼ŒåŸºäºç§»åŠ¨æµè§ˆ å™¨çš„ï¼Œæ··åˆçš„åº”ç”¨ã€‚</p>
<p>1ã€ ä½¿ç”¨ <code>Appium</code>è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„å¥½å¤„</p>
<p>â€‹       <code>Appium</code>åœ¨ä¸åŒå¹³å°ä¸­ä½¿ç”¨äº†æ ‡å‡†çš„è‡ªåŠ¨åŒ– APIsï¼Œæ‰€ä»¥åœ¨è·¨å¹³å°æ—¶ï¼Œä¸éœ€è¦é‡æ–°ç¼–è¯‘æˆ–è€… ä¿®æ”¹è‡ªå·±çš„åº”ç”¨ã€‚<br>
â€‹       <code>Appium</code>æ”¯æŒ Selenium WebDriveræ”¯æŒçš„æ‰€æœ‰è¯­è¨€ï¼Œå¦‚ javaã€Object-Cã€JavaScriptã€Phpã€ Pythonã€Rubyã€C#ã€ï¼Œæˆ–è€… Perl è¯­è¨€ï¼Œæ›´å¯ä»¥ä½¿ç”¨ Selenium WebDriver çš„ Apiã€‚<code>Appium</code>æ”¯æŒä»»ä½•ä¸€ç§æµ‹è¯•æ¡†æ¶ã€‚<code>Appium</code>å®ç°äº†çœŸæ­£çš„è·¨å¹³å°è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚ï¼ˆæœ¬æ–‡ä¸»è¦ä»‹ç» Pythonçš„ç”¨æ³•ï¼‰</p>
<p>2ã€<code>Appium</code>æ¶æ„</p>
<p>â€‹      <code>Appium</code> æ˜¯ä¸€ä¸ªç”¨ Node.jsç¼–å†™çš„HTTP serverï¼Œå®ƒåˆ›å»ºã€å¹¶ç®¡ç†å¤šä¸ª WebDriver sessions æ¥ å’Œä¸åŒå¹³å°äº¤äº’ï¼Œå¦‚ iOS ï¼ŒAndroid ç­‰ç­‰.</p>
<p>â€‹      <code>Appium</code> å¼€å§‹ä¸€ä¸ªæµ‹è¯•åï¼Œå°±ä¼šåœ¨è¢«æµ‹è®¾å¤‡ï¼ˆæ‰‹æœºï¼‰ä¸Šå¯åŠ¨ä¸€ä¸ª server ï¼Œç›‘å¬æ¥è‡ª Appium serverçš„æŒ‡ä»¤. æ¯ç§å¹³å°åƒ iOS å’Œ Android éƒ½æœ‰ä¸åŒçš„è¿è¡Œã€å’Œäº¤äº’æ–¹å¼ã€‚æ‰€ä»¥ <code>Appium</code> ä¼šç”¨æŸä¸ªæ¡©ç¨‹åºâ€œä¾µå…¥â€è¯¥å¹³å°ï¼Œå¹¶æ¥å—æŒ‡ä»¤ï¼Œæ¥å®Œæˆæµ‹è¯•ç”¨ä¾‹çš„è¿è¡Œã€‚</p>
<hr>
<h2 id="äºŒ-appiumå®‰è£…">äºŒã€Appiumå®‰è£…</h2>
<p>1ã€å®‰è£…JDKï¼Œé…ç½®JDK ç¯å¢ƒ</p>
<p>æ‰“å¼€è®¡ç®—æœº-&gt;ç³»ç»Ÿå±æ€§-&gt;é«˜çº§ç³»ç»Ÿè®¾ç½®-&gt;ç¯å¢ƒå˜é‡-&gt;æ–°å»ºï¼ˆç³»ç»Ÿå˜é‡ï¼‰ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[DDTæ¡†æ¶]]></title>
        <id>https://liujinyang6.github.io/post/ddt-kuang-jia/</id>
        <link href="https://liujinyang6.github.io/post/ddt-kuang-jia/">
        </link>
        <updated>2020-03-20T06:18:35.000Z</updated>
        <content type="html"><![CDATA[<p>â€‹		<br>
â€‹		<strong>æ•°æ®é©±åŠ¨</strong>çš„å•å…ƒæµ‹è¯•æ˜¯ä¸ºæ•°æ®æºä¸­çš„æ¯ä¸€è¡Œé‡å¤è¿è¡Œçš„ä¸€ç§å•å…ƒæµ‹è¯•ã€‚<strong>æ•°æ®é©±åŠ¨</strong>çš„å•å…ƒæµ‹è¯•çš„å¸¸ç”¨æƒ…å†µæ˜¯ä½¿ç”¨å¤šä¸ªè¾“å…¥å€¼æµ‹è¯• APIã€‚ä¸æ˜¯ç¼–å†™è°ƒç”¨ API çš„å¤šä¸ªå•å…ƒæµ‹è¯•ï¼ˆæ¯ä¸ªå•å…ƒæµ‹è¯•å‡å…·æœ‰ä¸€ç»„æ–°çš„è¾“å…¥ï¼‰ï¼Œä¹Ÿä¸æ˜¯åœ¨å•å…ƒæµ‹è¯•ä¸­åˆ›å»ºä¸€ä¸ªæ•°ç»„å¹¶ä½¿ç”¨å¾ªç¯ä»£ç ï¼Œè€Œæ˜¯å¯ä»¥ç¼–å†™æ‰§è¡Œ API çš„å•ä¸ªå•å…ƒæµ‹è¯•æ–¹æ³•ã€‚ç„¶åå¯ä»¥ä»æ•°æ®åº“è¡¨çš„è¡Œä¸­è¿›è¡Œæ•°æ®æ£€ç´¢ä»¥ä¾¿ä¼ é€’ç»™è¯¥æµ‹è¯•æ–¹æ³•çš„è¿ç»­è°ƒç”¨ã€‚å¯ä»¥ä½¿ç”¨æ­¤æŠ€æœ¯æµ‹è¯•ç”±ä¸åŒç”¨æˆ·ï¼ˆæ¯ä¸ªç”¨æˆ·å…·æœ‰ä¸åŒè§’è‰²ï¼‰ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚å¯¹äºæ¯ä¸ªç”¨æˆ·ï¼Œæ•°æ®æºä¸­çš„ä¸€è¡Œå°†æ ¹æ®è§’è‰²æŒ‡ç¤ºé¢„æœŸå“åº”ã€‚ç„¶åï¼Œè¯¥æµ‹è¯•å°†é€šè¿‡é’ˆå¯¹æ¯ä¸ªç”¨æˆ·è¿è¡ŒåŠŸèƒ½ï¼Œå¯¹è¯¥åº”ç”¨ç¨‹åºè¿›è¡Œæµ‹è¯•ï¼Œå¹¶éªŒè¯äº§ç”Ÿçš„å“åº”æ˜¯å¦ä¸é¢„æœŸå“åº”ä¸€è‡´ã€‚</p>
<p>â€‹		åœ¨æµ‹è¯•å·¥ä½œä¸­ï¼Œé’ˆå¯¹æŸä¸€APIæ¥å£ï¼Œæˆ–è€…æŸä¸€ä¸ªç”¨æˆ·ç•Œé¢çš„è¾“å…¥æ¡†ï¼Œéœ€è¦è®¾è®¡å¤§é‡ç›¸å…³çš„ç”¨ä¾‹ï¼Œæ¯ä¸€ä¸ªç”¨ä¾‹åŒ…å«å®é™…è¾“å…¥çš„å„ç§å¯èƒ½çš„æ•°æ®ã€‚é€šå¸¸çš„åšæ³•æ˜¯ï¼Œå°†æµ‹è¯•æ•°æ®å­˜æ”¾åˆ°ä¸€ä¸ªæ•°æ®æ–‡ä»¶é‡Œï¼Œç„¶åä»æ•°æ®æ–‡ä»¶è¯»å–ï¼Œåœ¨è„šæœ¬ä¸­å¾ªç¯è¾“å…¥æµ‹è¯•æ•°æ®ï¼Œå¹¶å¯¹ç»“æœè¿›è¡ŒéªŒè¯ã€‚</p>
<p>â€‹		<code>ddt</code>æ˜¯ç»“åˆ<code>unittest</code>æ¡†æ¶æ¥å·¥ä½œçš„ï¼Œæ‰€ä»¥è¦å…ˆå…·å¤‡<code>unittest</code>æ¡†æ¶çš„çŸ¥è¯†ã€‚</p>
<hr>
<h2 id="ä½¿ç”¨æ­¥éª¤">ä½¿ç”¨æ­¥éª¤</h2>
<p>1.å¯¼å…¥ddtåŒ…</p>
<p>2.ç”¨è£…é¥°å™¨è£…é¥°@ddt</p>
<p>3.ä¼ å…¥å‚æ•°ï¼Œæ‰§è¡Œ</p>
<hr>
<h2 id="ä¼ å‚ç¤ºä¾‹">ä¼ å‚ç¤ºä¾‹</h2>
<h3 id="ä¼ å‚æ–¹å¼ä¸€å•ä¸ªä¼ å‚">ä¼ å‚æ–¹å¼ä¸€ï¼šå•ä¸ªä¼ å‚</h3>
<pre><code class="language-python"># å•ä¸ªä¼ å‚

import unittest
from ddt import ddt,data,unpack


@ddt
class MyTestCase1(unittest.TestCase):
    
    # 2,3,4ä¼šåˆ†åˆ«æŒ‰ç…§æ‰§è¡Œæ¬¡æ•°ä¼ å…¥ï¼Œæ¯”å¦‚ç¬¬ä¸€æ¬¡æ‰§è¡Œæ–¹æ³•ä¼ å…¥2ï¼Œç¬¬äºŒæ¬¡æ‰§è¡Œæ–¹æ³•ä¼ å…¥3,ç¬¬ä¸‰æ¬¡......
    @data(2, 3, 4)
    def test_normal(self, value):
        
        print(value)
        
        self.assertEqual(value, 2)

        
if __name__ == '__main__':
    
    unittest.main()
</code></pre>
<hr>
<h3 id="ä¼ å‚æ–¹å¼äºŒå…ƒç»„-åˆ—è¡¨-å­—å…¸ä¼ å‚">ä¼ å‚æ–¹å¼äºŒï¼šå…ƒç»„ã€åˆ—è¡¨ã€å­—å…¸ä¼ å‚</h3>
<pre><code class="language-python"># å…ƒç»„ã€åˆ—è¡¨ã€å­—å…¸ä¼ å‚

import unittest
from ddt import ddt,data,unpack


@ddt
class MyTestCase2(unittest.TestCase):
    
    # ä¼šä¾æ¬¡æŒ‰ç…§æ‰§è¡Œæ¬¡æ•°ä¼ å…¥ï¼Œæ¯”å¦‚ç¬¬ä¸€æ¬¡æ‰§è¡Œè¯¥æ–¹æ³•ä¼ å…¥ï¼ˆ1ï¼Œ2ï¼‰ï¼Œç¬¬äºŒæ¬¡ä¼ å…¥ï¼ˆ2ï¼Œ3ï¼‰
    @data((1, 2), (2, 3))
    @unpack  # åªæœ‰éœ€è¦è¿›è¡Œåˆ†å‘å‚æ•°çš„æ—¶å€™æ‰éœ€è¦æ·»åŠ ã€‚1åˆ†å‘ç»™value1ï¼Œ2åˆ†å‘ç»™value2
    def test_tuple(self, value1, value2):
        
        print(&quot;tuple:&quot;,value1, value2)
        
        self.assertEqual(value2, value1+1)
        
     
    @data([1, 2], [2, 3])
    @unpack
    def test_list(self, value1, value2):
        
        print(&quot;list:&quot;,value1, value2)
        
        self.assertEqual(value2, value1+1)
        
    
    @data({'value1':1, 'value2':2}, {'value1':2, 'value2':3})
    @unpack   # å…¥å‚å‚æ•°åå¿…é¡»å’Œå­—å…¸keyå€¼ä¸€è‡´ï¼Œå¦åˆ™ä¼šæŠ¥é”™
    def test_dict(self, value1, value2):
        
        print(&quot;dictionary:&quot;,value1, value2)
        
        self.assertEqual(value2, value1+1)
        
     
if __name__ == '__main__':
    
    unittest.main()
</code></pre>
<hr>
<h3 id="ä¼ å‚æ–¹å¼ä¸‰jsonæ–‡ä»¶ä¼ å‚">ä¼ å‚æ–¹å¼ä¸‰ï¼šjsonæ–‡ä»¶ä¼ å‚</h3>
<pre><code class="language-python"># ä¼ å…¥json

import unittest
from ddt import ddt,data,unpack,file_data


@ddt
class MyTestCase3(unittest.TestCase):
    
    @file_data('E:\\test.json')
    def test_file(self, value):
        
        print(&quot;json file:&quot;,value)
        
 
if __name__ == '__main__':
    
    unittest.main()
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[unittestæ•™ç¨‹]]></title>
        <id>https://liujinyang6.github.io/post/unittest-jiao-cheng/</id>
        <link href="https://liujinyang6.github.io/post/unittest-jiao-cheng/">
        </link>
        <updated>2020-03-16T06:33:33.000Z</updated>
        <content type="html"><![CDATA[<p>Pythonä¸­æœ‰ä¸€ä¸ªè‡ªå¸¦çš„å•å…ƒæµ‹è¯•æ¡†æ¶æ˜¯<code>unittest</code>æ¨¡å—ï¼Œç”¨å®ƒæ¥åšå•å…ƒæµ‹è¯•ï¼Œå®ƒé‡Œé¢å°è£…å¥½äº†ä¸€äº›æ ¡éªŒè¿”å›çš„ç»“æœæ–¹æ³•å’Œä¸€äº›ç”¨ä¾‹æ‰§è¡Œå‰çš„åˆå§‹åŒ–æ“ä½œã€‚åœ¨è¯´unittestä¹‹å‰ï¼Œå…ˆè¯´å‡ ä¸ªæ¦‚å¿µï¼š</p>
<p><code>TestCase</code> ä¹Ÿå°±æ˜¯æµ‹è¯•ç”¨ä¾‹</p>
<p><code>TestSuite</code> å¤šä¸ªæµ‹è¯•ç”¨ä¾‹é›†åˆåœ¨ä¸€èµ·ï¼Œå°±æ˜¯TestSuite</p>
<p><code>TestLoader</code>æ˜¯ç”¨æ¥åŠ è½½TestCaseåˆ°TestSuiteä¸­çš„</p>
<p><code>TestRunner</code>æ˜¯æ¥æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹çš„,æµ‹è¯•çš„ç»“æœä¼šä¿å­˜åˆ°TestResultå®ä¾‹ä¸­ï¼ŒåŒ…æ‹¬è¿è¡Œäº†å¤šå°‘æµ‹è¯•ç”¨ä¾‹ï¼ŒæˆåŠŸäº†å¤šå°‘ï¼Œå¤±è´¥äº†å¤šå°‘ç­‰ä¿¡æ¯</p>
<p>ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«æ¥è§£é‡Šè¿™å››ä¸ªæ¦‚å¿µçš„æ„æ€ï¼Œå…ˆæ¥çœ‹ä¸€å¼ unittestçš„é™æ€ç±»å›¾ã€‚</p>
<figure data-type="image" tabindex="1"><img src="https://liujinyang6.github.io/post-images/1592375687634.png" alt="" loading="lazy"></figure>
<p>ä¸€ä¸ª<code>TestCase</code>çš„å®ä¾‹å°±æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚ä»€ä¹ˆæ˜¯æµ‹è¯•ç”¨ä¾‹å‘¢ï¼Ÿå°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•æµç¨‹ï¼ŒåŒ…æ‹¬æµ‹è¯•å‰å‡†å¤‡ç¯å¢ƒçš„æ­å»º(setUp)ï¼Œæ‰§è¡Œæµ‹è¯•ä»£ç (run)ï¼Œä»¥åŠæµ‹è¯•åç¯å¢ƒçš„è¿˜åŸ(tearDown)ã€‚å•å…ƒæµ‹è¯•(unit test)çš„æœ¬è´¨ä¹Ÿå°±åœ¨è¿™é‡Œï¼Œä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•å•å…ƒï¼Œé€šè¿‡è¿è¡Œè¿™ä¸ªæµ‹è¯•å•å…ƒï¼Œå¯ä»¥å¯¹æŸä¸€ä¸ªé—®é¢˜è¿›è¡ŒéªŒè¯ã€‚</p>
<p>è€Œå¤šä¸ªæµ‹è¯•ç”¨ä¾‹é›†åˆåœ¨ä¸€èµ·ï¼Œå°±æ˜¯<code>TestSuite</code>ï¼Œè€Œä¸”TestSuiteä¹Ÿå¯ä»¥åµŒå¥—TestSuiteã€‚</p>
<p><code>TestLoader</code>æ˜¯ç”¨æ¥åŠ è½½TestCaseåˆ°TestSuiteä¸­çš„ï¼Œå…¶ä¸­æœ‰å‡ ä¸ªloadTestsFrom__()æ–¹æ³•ï¼Œå°±æ˜¯ä»å„ä¸ªåœ°æ–¹å¯»æ‰¾TestCaseï¼Œåˆ›å»ºå®ƒä»¬çš„å®ä¾‹ï¼Œç„¶åaddåˆ°TestSuiteä¸­ï¼Œå†è¿”å›ä¸€ä¸ªTestSuiteå®ä¾‹ã€‚</p>
<p><code>TextTestRunner</code>æ˜¯æ¥æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹çš„ï¼Œå…¶ä¸­çš„run(test)ä¼šæ‰§è¡ŒTestSuite/TestCaseä¸­çš„run(result)æ–¹æ³•ã€‚</p>
<p>æµ‹è¯•çš„ç»“æœä¼šä¿å­˜åˆ°TextTestResultå®ä¾‹ä¸­ï¼ŒåŒ…æ‹¬è¿è¡Œäº†å¤šå°‘æµ‹è¯•ç”¨ä¾‹ï¼ŒæˆåŠŸäº†å¤šå°‘ï¼Œå¤±è´¥äº†å¤šå°‘ç­‰ä¿¡æ¯ã€‚</p>
<p>ä¸€ä¸ªclassç»§æ‰¿äº†unittest.TestCaseï¼Œä¾¿æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œä½†å¦‚æœå…¶ä¸­æœ‰å¤šä¸ªä»¥ test å¼€å¤´çš„æ–¹æ³•ï¼Œé‚£ä¹ˆæ¯æœ‰ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•ï¼Œåœ¨loadçš„æ—¶å€™ä¾¿ä¼šç”Ÿæˆä¸€ä¸ªTestCaseå®ä¾‹ï¼Œå¦‚ï¼šä¸€ä¸ªclassä¸­æœ‰å››ä¸ªtest_xxxæ–¹æ³•ï¼Œæœ€ååœ¨loadåˆ°suiteä¸­æ—¶ä¹Ÿæœ‰å››ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚</p>
<hr>
<p>åœ¨æ¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­å¯ä»¥é‡å†™ ä»¥ä¸‹å‡½æ•° :</p>
<p><code>setUp()</code>è¯¥æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå‰çš„è®¾ç½®å·¥ä½œã€</p>
<p><code>tearDown()</code>è¯¥æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œåçš„æ¸…ç†å·¥ä½œã€</p>
<p><code>setUpClass()</code>æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å‰çš„è®¾ç½®å·¥ä½œã€</p>
<p><code>tearDownClass()</code>æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œåçš„æ¸…æ´—å·¥ä½œ</p>
<hr>
<p>åœ¨æ¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­å¯ä»¥é€šè¿‡<code>skip</code>ï¼Œ<code>skipIf</code>ï¼Œ<code>skipUnless</code>è£…é¥°å™¨è·³è¿‡æŸä¸ªæµ‹è¯•å‡½æ•°ï¼Œæˆ–è€…ç”¨TestCase.skipTestæ–¹æ³•è·³è¿‡æµ‹è¯•å‡½æ•°ã€‚</p>
<pre><code class="language-python">@unittest.skip()

@unittest.skipIf()

@unittest.skipUnless()
</code></pre>
<hr>
<p>åˆ°è¿™é‡Œunittestçš„æ•´ä¸ªæµç¨‹å°±æ¸…æ¥šäº†ï¼š</p>
<p>å†™å¥½<code>TestCase</code>ï¼Œç„¶åç”±<code>TestLoader</code>åŠ è½½<code>TestCase</code>åˆ°<code>TestSuite</code>ï¼Œç„¶åç”±<code>TextTestRunner</code>æ¥è¿è¡Œ<code>TestSuite</code>ï¼Œè¿è¡Œçš„ç»“æœä¿å­˜åœ¨<code>TextTestResult</code>ä¸­ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡å‘½ä»¤è¡Œæˆ–è€…<code>unittest.main()</code>æ‰§è¡Œæ—¶ï¼Œmainä¼šè‡ªåŠ¨è°ƒç”¨TextTestRunnerä¸­çš„runæ¥æ‰§è¡Œï¼Œæˆ–è€…æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡TextTestRunneræ¥æ‰§è¡Œç”¨ä¾‹ã€‚</p>
<p>åŠ ä¸ªè¯´æ˜ï¼š</p>
<p>1ã€<code>TestLoader</code>åŠ è½½<code>TestCase</code>åˆ°<code>TestSuite</code>å¯ä»¥é€šè¿‡<code>TestSuite</code>å®ä¾‹å¯¹è±¡çš„<code>addTest()</code>å’Œ<code>addTests()</code>æ–¹æ³•å‘suiteä¸­æ·»åŠ caseæˆ–suite</p>
<p>2ã€åœ¨Runneræ‰§è¡Œæ—¶ï¼Œé»˜è®¤å°†æ‰§è¡Œç»“æœè¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å…¶è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­æŸ¥çœ‹ç»“æœï¼ˆä½ å¯èƒ½å¬è¯´è¿‡HTMLTestRunnerï¼Œæ˜¯çš„ï¼Œé€šè¿‡å®ƒå¯ä»¥å°†ç»“æœè¾“å‡ºåˆ°HTMLä¸­ï¼Œç”Ÿæˆæ¼‚äº®çš„æŠ¥å‘Šï¼Œå®ƒè·ŸTextTestRunneræ˜¯ä¸€æ ·çš„ï¼Œä»åå­—å°±èƒ½çœ‹å‡ºæ¥ï¼Œè¿™ä¸ªæˆ‘ä»¬åé¢å†è¯´ï¼‰ã€‚</p>
<p>3ã€åœ¨è¿›è¡Œæµ‹è¯•æ—¶å¯ä»¥ä¼ é€’verbosityå‚æ•°ï¼Œç”¨ä»¥æ§åˆ¶æ‰§è¡Œç»“æœçš„è¾“å‡ºï¼Œ0 æ˜¯ç®€å•æŠ¥å‘Šã€1 æ˜¯ä¸€èˆ¬æŠ¥å‘Šã€2 æ˜¯è¯¦ç»†æŠ¥å‘Šã€‚</p>
<hr>
<p><strong>è¢«æµ‹æ–¹æ³•</strong>ï¼š</p>
<p>è¿™é‡Œæˆ‘ä»¬éšæ„å†™å‡ ä¸ªä¸šåŠ¡å‡½æ•°ï¼Œè¡¨ç¤ºæˆ‘ä»¬å°†è¦è¿›è¡Œæµ‹è¯•çš„åŠŸèƒ½å‡½æ•°ã€‚å°†åŠŸèƒ½å‡½æ•°æ–‡ä»¶å­˜å‚¨æˆmyfun.py</p>
<pre><code class="language-python"># è¢«æµ‹å‡½æ•°ç¤ºä¾‹
# ä¿å­˜ä¸ºmufun.py


def add(a, b):
    
    return a + b


def minus(a, b):
    
    return a - b


def multi(a, b):
    
    return a * b


def divide(a, b):
    
    return a / b
</code></pre>
<p><strong>TestCaseæµ‹è¯•ç”¨ä¾‹</strong>:</p>
<p>æˆ‘ä»¬é€šè¿‡æµ‹è¯•ç”¨ä¾‹ç”¨ä»£ç æ¥å®ç°æ¯ä¸€ä¸ªæµ‹è¯•çš„è¯¦ç»†è¿‡ç¨‹å’Œé’ˆå¯¹æµ‹è¯•ç›®æ ‡è¦æµ‹è¯•çš„å†…å®¹ã€‚åŒç›®å½•ä¸‹åˆ›å»ºtest_myfun.py</p>
<pre><code class="language-python"># æµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹


class TestMyFun(unittest.TestCase):
    
    # TestCaseåŸºç±»æ–¹æ³•ï¼Œæ‰€æœ‰caseæ‰§è¡Œä¹‹å‰è‡ªåŠ¨æ‰§è¡Œ
    @classmethod
    def setUpClass(cls):
        
        print(&quot;è¿™é‡Œæ˜¯æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å‰çš„å‡†å¤‡å·¥ä½œ&quot;)
        
    
    # TestCaseåŸºç±»æ–¹æ³•ï¼Œæ‰€æœ‰caseæ‰§è¡Œä¹‹åè‡ªåŠ¨æ‰§è¡Œ
    @classmethod
    def tearDownClass(cls):
        
        print(&quot;è¿™é‡Œæ˜¯æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹åçš„æ¸…ç†å·¥ä½œ&quot;)
        
    
    # TestCaseåŸºç±»æ–¹æ³•ï¼Œæ¯æ¬¡æ‰§è¡Œcaseå‰è‡ªåŠ¨æ‰§è¡Œ
    def setUp(self):
        
        print(&quot;è¿™é‡Œæ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å‰çš„å‡†å¤‡å·¥ä½œ&quot;)
        
    
    # TestCaseåŸºç±»æ–¹æ³•ï¼Œæ¯æ¬¡æ‰§è¡Œcaseåè‡ªåŠ¨æ‰§è¡Œ
    def tearDown(self):
        
        print(&quot;è¿™é‡Œæ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹åçš„æ¸…ç†å·¥ä½œ&quot;)
        
        
    @unittest.skip(&quot;æˆ‘æƒ³ä¸´æ—¶è·³è¿‡è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹&quot;)
    def test_add(self):                   # æµ‹è¯•add()å‡½æ•°
        
        self.assertEqual(3, add(1, 2))
		
        self.assertNotEqual(3, add(2, 2))
    
    
    def test_minus(self):                 # æµ‹è¯•minus()å‡½æ•°
        
        self.skipTest(&quot;è·³è¿‡è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹&quot;)
        
        self.assertEqual(1, minus(3, 2))
        
     
     def test_multi(self):                # æµ‹è¯•multi()å‡½æ•°
            
         self.assertEqual(6, multi(2, 3))  
     
    
     def test_divide(self):               # æµ‹è¯•divide()å‡½æ•°
            
         self.assertEqual(2, divide(6, 3))
        
         self.assertEqual(2.5, divide(5, 2))
 

if __name__ == &quot;__main__&quot;:
    
    unittest.main(verbosity=2)
    
    
</code></pre>
<ul>
<li>æ³¨æ„ï¼š</li>
</ul>
<p>skipè£…é¥°å™¨ä¸€å…±æœ‰ä¸‰ä¸ª <code>unittest.skip(reason)</code>ã€<code>unittest.skipIf(condition,reason)</code>ã€<code>unittest.skipUnless(condition,reason)</code>ï¼Œå…¶ä¸­<strong>skip</strong>æ˜¯æ— æ¡ä»¶è·³è¿‡ï¼Œ<strong>skipIf</strong>æ˜¯å½“conditionä¸ºTrueæ—¶è·³è¿‡ï¼Œ<strong>skipUnless</strong>æ˜¯å½“conditionä¸ºFalseæ—¶è·³è¿‡ã€‚</p>
<p>æ¯ä¸ªæµ‹è¯•æ–¹æ³•<strong>å¿…é¡»</strong>ä»¥ <strong>test</strong> å¼€å¤´ï¼Œå¦åˆ™æ˜¯ä¸è¢«unittestè¯†åˆ«çš„ã€‚å…¶å®æ¯ä¸€ä¸ªtestå¼€å¤´çš„æ–¹æ³•éƒ½ä¼šåŠ è½½ä¸ºç‹¬ç«‹çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>åœ¨unittest.main()ä¸­åŠ  <strong>verbosity</strong> å‚æ•°å¯ä»¥æ§åˆ¶è¾“å‡ºçš„é”™è¯¯æŠ¥å‘Šçš„è¯¦ç»†ç¨‹åº¦ï¼Œé»˜è®¤æ˜¯ 1ï¼›å¦‚æœè®¾ä¸º 0ï¼Œåˆ™ä¸è¾“å‡ºæ¯ä¸€ç”¨ä¾‹çš„æ‰§è¡Œç»“æœï¼›å¦‚æœå‚æ•°ä¸º2åˆ™è¡¨ç¤ºè¾“å‡ºè¯¦ç»†ç»“æœã€‚</p>
<hr>
<h3 id="testsuiteæµ‹è¯•å¥—ä»¶">TestSuiteæµ‹è¯•å¥—ä»¶</h3>
<p><code>TestSuite</code>ç”¨æ¥æ§åˆ¶å¤šä¸ªæµ‹è¯•ç”¨ä¾‹å’Œå¤šä¸ªæµ‹è¯•æ–‡ä»¶ä¹‹é—´çš„æµ‹è¯•é¡ºåºã€‚ï¼ˆè¿™é‡Œçš„ç¤ºä¾‹ä¸­çš„å‡ ä¸ªæµ‹è¯•æ–¹æ³•å¹¶æ²¡æœ‰ä¸€å®šå…³ç³»ï¼Œä½†ä¹‹åä½ å†™çš„ç”¨ä¾‹å¯èƒ½ä¼šæœ‰å…ˆåå…³ç³»ï¼Œéœ€è¦å…ˆæ‰§è¡Œæ–¹æ³•Aï¼Œå†æ‰§è¡Œæ–¹æ³•Bï¼‰ï¼Œæˆ‘ä»¬æ·»åŠ åˆ°TestSuiteä¸­çš„caseæ˜¯ä¼šæŒ‰ç…§æ·»åŠ çš„é¡ºåºæ‰§è¡Œçš„ã€‚</p>
<h4 id="ä¸€-åˆ›å»ºæµ‹è¯•å¥—ä»¶">ä¸€ã€åˆ›å»ºæµ‹è¯•å¥—ä»¶</h4>
<p>è¯­æ³•ï¼š1.<strong>å®ä¾‹åŒ–</strong>ã€2.è°ƒç”¨ <code>addTest()</code>æ–¹æ³•</p>
<pre><code class="language-python"># 1.å®ä¾‹åŒ–Testsuiteç±»
# æ³¨ï¼šTestSuite()ä¸»è¦ç”¨æ¥åˆ›å»ºæµ‹è¯•å¥—ä»¶é›†åˆ
suite = unittest.TestSuite()           

# 2.è°ƒç”¨addTest()æ·»åŠ æµ‹è¯•æ–¹æ³•
# æ·»åŠ è¯­æ³•ï¼šsuite.addTest(æ–‡ä»¶å.ç±»å(â€˜ç±»ä¸­çš„æ–¹æ³•åâ€™))
suite.addTest(TestCount('test_add'))  

# è°ƒç”¨TestSuiteç±»ä¸­çš„addTestï¼šsuite.addTest(ç±»å(â€˜ç±»ä¸­çš„æ–¹æ³•åâ€™))
# æ‰§è¡Œé¡ºåºæ˜¯æŒ‰ç…§æ·»åŠ çš„é¡ºåºæ‰§è¡Œï¼Œå…ˆæ·»åŠ çš„å…ˆæ‰§è¡Œ

</code></pre>
<ul>
<li>æ³¨ï¼štest_addæ˜¯unittestè„šæœ¬ä¸­çš„è¢«æµ‹æ–¹æ³•ï¼Œå¦‚æœæ˜¯æ·»åŠ è¢«å¯¼å…¥æ¨¡å—ä¸­çš„æ–¹æ³•ï¼Œåˆ™éœ€è¦æŒ‡å®šå“ªä¸ªæ–‡ä»¶åã€‚</li>
<li>suite.addTest(æ–‡ä»¶å.ç±»å(â€˜ç±»ä¸­çš„æ–¹æ³•åâ€™))</li>
</ul>
<h4 id="äºŒ-è¿è¡Œæµ‹è¯•å¥—ä»¶texttestrunner">äºŒã€ è¿è¡Œæµ‹è¯•å¥—ä»¶TextTestRunner()</h4>
<p>è¯­æ³•ï¼š1.<strong>å®ä¾‹åŒ–</strong>ã€ 2.è°ƒç”¨<code>run()</code>æ–¹æ³•</p>
<pre><code class="language-python"># 1.å®ä¾‹åŒ–TextTestRunnerç±»
runner = unittest.TextTestRunner()    

# 2.è°ƒç”¨Testsuiteç±»ä¸­çš„addTestæ–¹æ³•
runner.run(suite)             

</code></pre>
<ul>
<li>æ³¨ï¼š<strong>TextTestRunner()<strong>ä¸»è¦ç”¨æ¥è¿è¡Œ</strong>æµ‹è¯•å¥—ä»¶</strong></li>
</ul>
<hr>
<ul>
<li>
<p><strong>å‘</strong>ï¼š<a href="https://www.cnblogs.com/kaerxifa/p/11046156.html">ä½¿ç”¨Unitteståšå•å…ƒæµ‹è¯•ï¼ŒaddTestï¼ˆï¼‰å•ä¸ªcaseçš„æ—¶å€™å´æ‰§è¡Œå…¨éƒ¨çš„case</a></p>
<p>é¦–å…ˆé€ æˆè¿™ä¸ªç»“æœçš„åŸå› æ˜¯pycharmé…ç½®é—®é¢˜</p>
</li>
</ul>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<pre><code class="language-python">import unittest


class Testadd(unittest.TestCase):

    def setUp(self):
        self.a = 20
        self.b = 10

        
    def test_add(self):
        result = self.a + self.b
        self.assertEqual(result,30)
    
    
    def test_sub(self):
        result = self.a -self.b
        self.assertEqual(result,10)


if __name__ == &quot;__main__&quot;:
    suite = unittest.TestSuite()
    suite.addTest(Testadd(&quot;test_add&quot;))
    runner = unittest.TextTestRunner()
    runner.run(suite)

</code></pre>
<p>pycharmæ‰§è¡Œç»“æœï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://liujinyang6.github.io/post-images/1592375744115.png" alt="" loading="lazy"></figure>
<p>å‘½ä»¤è¡Œæ‰§è¡Œç»“æœï¼š</p>
<figure data-type="image" tabindex="3"><img src="https://liujinyang6.github.io/post-images/1592375752876.png" alt="" loading="lazy"></figure>
<p><strong>é—®é¢˜è§£å†³ï¼š</strong></p>
<ol>
<li>
<p>ç‚¹å‡»pycharmçš„å³ä¸Šè§’ä¸‹æ‹‰èœå•ï¼Œç‚¹å‡»Edit configurations</p>
</li>
<li>
<p>å°†Python testsé‡Œçš„å¯¹åº”æ–‡ä»¶çš„py.test for...æˆ–è€…unittest for...çš„æ–‡ä»¶åˆ é™¤ï¼ˆé€‰ä¸­åç‚¹å‡»å·¦ä¸Šè§’çš„å‡å·ï¼‰</p>
</li>
</ol>
<figure data-type="image" tabindex="4"><img src="https://liujinyang6.github.io/post-images/1592375874971.png" alt="" loading="lazy"></figure>
<ol start="3">
<li>ç‚¹å‡»+ï¼Œåœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©Pythonï¼Œç„¶ååœ¨å³è¾¹çš„script pathé‡Œ...é€‰ä¸­æ‰€è¦è¿è¡Œçš„æ–‡ä»¶</li>
</ol>
<figure data-type="image" tabindex="5"><img src="https://liujinyang6.github.io/post-images/1592375885340.png" alt="" loading="lazy"></figure>
<ol>
<li>æœ€åç‚¹å‡»okå³å¯ï¼Œå†åœ¨æ‰€è¦è¿è¡Œçš„æ–‡ä»¶å¤„ï¼ˆæœ€å¥½æ˜¯mainå¤„ï¼‰ç‚¹å‡»å³é”®å°±ä¼šå‘ç°run unittestå˜æˆäº†run</li>
</ol>
<p>å†æ¬¡åœ¨pycharmä¸­è¿è¡Œï¼Œwell done</p>
<figure data-type="image" tabindex="6"><img src="https://liujinyang6.github.io/post-images/1592376021514.png" alt="" loading="lazy"></figure>
<p>æ€»ç»“ï¼š</p>
<p>æ‰§è¡Œunittest in demoSingleå°±ä¼šè¿è¡Œå…¨éƒ¨case</p>
<figure data-type="image" tabindex="7"><img src="https://liujinyang6.github.io/post-images/1592376034418.png" alt="" loading="lazy"></figure>
<p>è€Œå¦‚æœè¿è¡Œpyæ–‡ä»¶æœ¬èº«å°±ä¼šåªè¿è¡Œaddsuiteæ·»åŠ çš„ç”¨ä¾‹</p>
<figure data-type="image" tabindex="8"><img src="https://liujinyang6.github.io/post-images/1592376044986.png" alt="" loading="lazy"></figure>
<hr>
<h4 id="ä¸‰-å•å…ƒæµ‹è¯•æ¡†æ¶å®ç°æ¨¡å—æ•´åˆ-discoveræ–¹æ³•">ä¸‰ã€å•å…ƒæµ‹è¯•æ¡†æ¶å®ç°æ¨¡å—æ•´åˆ---discoveræ–¹æ³•</h4>
<p>éå†æ‰€æœ‰æµ‹è¯•è„šæœ¬å®ç°æ•´åˆ</p>
<p>ä½¿ç”¨æµ‹è¯•å¥—ä»¶å•ç‹¬ç®¡ç†å…¨éƒ¨åŠŸèƒ½çš„ç”¨ä¾‹ï¼Œåˆ©ç”¨æµ‹è¯•å¥—ä»¶æ•´åˆ</p>
<h5 id="testloader"><strong>TestLoader</strong></h5>
<p>è¯¥ç±»æ ¹æ®å„ç§æ ‡å‡†è´Ÿè´£åŠ è½½æµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶è¿”å›ç»™æµ‹è¯•å¥—ä»¶ã€‚æ­£å¸¸æƒ…å†µä¸‹æ²¡æœ‰å¿…è¦åˆ›å»ºè¿™ä¸ªç±»çš„å®ä¾‹ã€‚unittest æä¾›äº†å¯ä»¥å…±äº«äº† defaultTestLoader ç±»ï¼Œå¯ä»¥ä½¿ç”¨å…¶å­ç±»å’Œæ–¹æ³•åˆ›å»ºå®ä¾‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¶ä¸‹é¢çš„ discover()æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>æ—¢ï¼š</p>
<pre><code class="language-python">discover = unittest.defaultTestLoader.discover(start_dirï¼Œpattern='test*.py'ï¼Œtop_level_dir=None)



discover = unittest.TestLoader().discover(start_dirï¼Œpattern='test*.py'ï¼Œtop_level_dir=None)


#è¿è¡Œæ–¹æ³•åŒä¸Š(ä¸Šè¿°æ–¹æ³•2é€‰1)
runner = unittest.TextTestRunner()

runner.run(discover)


</code></pre>
<p>æ‰¾åˆ°æŒ‡å®šç›®å½•ä¸‹æ‰€æœ‰æµ‹è¯•æ¨¡å—ï¼Œå¹¶å¯é€’å½’æŸ¥åˆ°å­ç›®å½•ä¸‹çš„æµ‹è¯•æ¨¡å—ï¼Œåªæœ‰åŒ¹é…åˆ°æ–‡ä»¶åæ‰èƒ½è¢«åŠ è½½ã€‚</p>
<p><code>start_dir</code> ï¼šè¦æµ‹è¯•çš„æ¨¡å—åæˆ–æµ‹è¯•ç”¨ä¾‹ç›®å½•ã€‚ï¼ˆé‡‡ç”¨åŒæ–œçº¿æˆ–ç›®å½•å‰åŠ rï¼‰</p>
<p><code>pattern='test*.py'</code>ï¼šè¡¨ç¤ºç”¨ä¾‹æ–‡ä»¶åçš„åŒ¹é…åŸåˆ™ã€‚æ˜Ÿå·â€œ*â€è¡¨ç¤ºä»»æ„å¤šä¸ªå­—ç¬¦ã€‚</p>
<p><code>top_level_dir=None</code>ï¼šæµ‹è¯•æ¨¡å—çš„é¡¶å±‚ç›®å½•ã€‚å¦‚æœæ²¡é¡¶å±‚ç›®å½•ï¼ˆä¹Ÿå°±æ˜¯è¯´æµ‹è¯•ç”¨ä¾‹ä¸æ˜¯åœ¨è¯¥ç›®å½•ä¸‹åˆ™éœ€è¦åˆ†åˆ«æŒ‡å®šï¼‰ï¼Œé»˜è®¤ä¸º Noneã€‚</p>
<ul>
<li>æ³¨ï¼š<strong>discover</strong>å‘ç°çš„pyæ–‡ä»¶ä¸èƒ½æ§åˆ¶å…ˆåé¡ºåºï¼Œåªèƒ½é€šè¿‡æ–‡ä»¶åå­—çš„asscciiç å€¼æ¥åˆ¤æ–­å…ˆåè¿è¡Œé¡ºåºï¼Œæ‰€ä»¥æ–‡ä»¶å‘½åçš„æ—¶å€™å¯ä»¥é€šè¿‡testAâ€¦â€¦ç­‰æ¥å®šä¹‰</li>
</ul>
<hr>
<h4 id="æ€»ç»“å•å…ƒæµ‹è¯•çš„æ‰§è¡Œæ–¹æ³•ä¸€å…±æœ‰3ç§">æ€»ç»“ï¼šå•å…ƒæµ‹è¯•çš„æ‰§è¡Œæ–¹æ³•ä¸€å…±æœ‰3ç§ï¼š</h4>
<p>ç¬¬ä¸€ç§ï¼šé€šè¿‡<code>unittest.main()</code>åŠ è½½å…¨éƒ¨testå¼€å¤´çš„ç”¨ä¾‹å¹¶è‡ªåŠ¨æ‰§è¡Œ</p>
<p>ç¬¬äºŒç§ï¼šé€šè¿‡æ·»åŠ æµ‹è¯•å¥—ä»¶çš„æ–¹æ³•<code>addTest</code>ï¼Œç„¶åè¿è¡Œæ·»åŠ å¥½çš„æµ‹è¯•å¥—ä»¶</p>
<p>ç¬¬ä¸‰ç§ï¼šé€šè¿‡<code>testloader</code>æ¥åŠ è½½æŒ‡å®šç›®å½•ä¸‹çš„testå¼€å¤´çš„ç”¨ä¾‹ï¼Œè¿è¡Œæ·»åŠ å¥½çš„<code>discover</code></p>
<hr>
<h3 id="æµ‹è¯•æŠ¥å‘Š">æµ‹è¯•æŠ¥å‘Š</h3>
<p>1ã€é€šè¿‡æ‰“å¼€/å†™å…¥æ–‡ä»¶ï¼Œç¼–å†™æµ‹è¯•æŠ¥å‘Š</p>
<p>â€‹	è‡ªå·±å®Œæˆ</p>
<p>2ã€é€šè¿‡ HTMLTestRunner.py æ¥ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šã€‚</p>
<p><code>HTMLTestRunner</code> æ˜¯ Python æ ‡å‡†åº“çš„ unittest å•å…ƒæµ‹è¯•æ¡†æ¶çš„ä¸€ä¸ªæ‰©å±•ã€‚å®ƒç”Ÿæˆæ˜“äºä½¿ç”¨çš„ HTML æµ‹è¯•æŠ¥å‘Šã€‚ <code>HTMLTestRunner</code>æ˜¯åœ¨ BSD è®¸å¯è¯ä¸‹å‘å¸ƒã€‚</p>
<hr>
<h4 id="htmltestrunner">HTMLTestRunner</h4>
<p>é¦–å…ˆè¦ä¸‹ HTMLTestRunner.py æ–‡ä»¶ï¼Œä¸‹è½½åœ°å€ï¼š</p>
<p>http://tungwaiyip.info/software/HTMLTestRunner.html</p>
<p>HTMLTestRunner.py æœ¬æ˜¯ä¸€ä¸ª.py æ–‡ä»¶ï¼Œå°†å®ƒæ”¾åˆ° Python å®‰è£…ç›®å½•ä¸‹å³å¯è°ƒç”¨ã€‚</p>
<pre><code class="language-python"># è¯­æ³•ï¼š
# é¦–å…ˆå¼•å…¥HTMLTestRunneråŒ…
import HTMLTestRunner

# ç”¨æ³•ï¼š
# 1----------å®šä¹‰ä¸ªæŠ¥å‘Šå­˜æ”¾è·¯å¾„
filename = 'C:\\test_object\\report\\result.html'

# 2----------å®šä¹‰ä¸€ä¸ªæ–‡ä»¶åï¼Œä»¥å†™æ–¹å¼æ‰“å¼€
fp = open(filename, 'wb')

# 3----------å®šä¹‰æµ‹è¯•æŠ¥å‘Š
runner =HTMLTestRunner.HTMLTestRunner(
		stream=fp,
		title=u'ç™¾åº¦æœç´¢æµ‹è¯•æŠ¥å‘Š',
		description=u'ç”¨ä¾‹æ‰§è¡Œæƒ…å†µï¼š')

# 4----------è¿è¡Œæµ‹è¯•ç”¨ä¾‹
runner.run(suite)

# 5----------å…³é—­æŠ¥å‘Šæ–‡ä»¶
fp.close()

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[pythonè¯»å†™excelæ–‡ä»¶]]></title>
        <id>https://liujinyang6.github.io/post/python-du-xie-excel-wen-jian/</id>
        <link href="https://liujinyang6.github.io/post/python-du-xie-excel-wen-jian/">
        </link>
        <updated>2020-03-06T03:14:57.000Z</updated>
        <content type="html"><![CDATA[<h2 id="ç”¨xlrdå’Œxlwtè¯»å†™excel"><strong>ç”¨xlrdå’Œxlwtè¯»å†™excel</strong></h2>
<p>é¦–å…ˆä¸‹è½½å®‰è£…<strong>xlrd</strong>å’Œ<strong>xlwt</strong>è¿™ä¸¤ä¸ªåº“</p>
<hr>
<h3 id="ä½¿ç”¨xlrdè¯»å–excel">ä½¿ç”¨xlrdè¯»å–excel</h3>
<pre><code class="language-python"># å¯¼å…¥åŒ…
import xlrd

# 1ã€æ‰“å¼€excel
readbook = xlrd.open_workbook(r'\test\canying.xlsx')

# 2ã€è·å–è¯»å…¥çš„æ–‡ä»¶çš„sheet
sheet = readbook.sheet_by_index(1)#ç´¢å¼•çš„æ–¹å¼ï¼Œä»0å¼€å§‹

sheet = readbook.sheet_by_name('sheet2')#é€šè¿‡åå­—å®šä½sheeté¡µ

allsheetnames = readbook.sheet_names()#è¿”å›æ‰€æœ‰sheeté¡µåå­—ç»„æˆçš„åˆ—è¡¨

# 3ã€è·å–sheetçš„æœ€å¤§è¡Œæ•°å’Œåˆ—æ•°
nrows = sheet.nrows#è¡Œ

ncols = sheet.ncols#åˆ—

# 4ã€è·å–æŸä¸ªå•å…ƒæ ¼çš„å€¼
lng = sheet.cell(x,y)

lng = sheet.cell(0,0).value#è·å–1è¡Œ1åˆ—çš„è¡¨æ ¼å€¼ï¼Œä»0å¼€å§‹è®¡æ•°

lat = sheet.cell(1,4).value#è·å–2è¡Œ5åˆ—çš„è¡¨æ ¼å€¼ï¼Œä»0å¼€å§‹è®¡æ•°

# 5ã€è·å–æŸè¡Œ/æŸåˆ—çš„å€¼
row_value = sheet.row_values(x)  #è·å–xè¡Œçš„å€¼ï¼Œä»0å¼€å§‹è®¡æ•°

col_value = sheet.col_values(y)  #è·å–yåˆ—çš„å€¼ï¼Œä»0å¼€å§‹è®¡æ•°

</code></pre>
<hr>
<h3 id="ä½¿ç”¨xlutilscopyå†™excel"><strong>ä½¿ç”¨xlutils.copyå†™excel</strong></h3>
<pre><code class="language-python"># å¯¼å…¥å‰ï¼Œå…ˆå¯¼å…¥xlrdï¼Œéœ€è¦ä¾èµ–è¿™ä¸ªåŒ…
from xlutils.copy import copy

# 1-è¯»å–æºexcelä¸­çš„æ‰€æœ‰æ•°æ®ï¼ˆå¤åˆ¶å¯¹è±¡ï¼‰
rb = xlrd.open_workbook(excel_dir + '\\' + 'data.xls')

# 2-å¤åˆ¶è¯»å–çš„æºexcelå¯¹è±¡
wb = copy(rb)

# 3-é€šè¿‡get_sheet()è·å–å¤åˆ¶å¯¹è±¡çš„sheeté¡µ
ws = wb.get_sheet(2)
    
# 4-å¯¹sheeté¡µè¿›è¡Œå†™å…¥(ä¼ å…¥xå’Œyåæ ‡ï¼Œå’Œå…·ä½“å†™å…¥çš„value)
ws.write(id,2,real)

ws.write(id,3,status)

# 5-ä¿å­˜excelï¼ˆå…·ä½“çš„excelè·¯å¾„+åç§°ï¼‰
wb.save(self.excel_dir + '\\' + 'data.xls')

</code></pre>
<ul>
<li><strong>æ³¨æ„</strong>ï¼šè¿è¡Œä»£ç æ—¶è¦å…³é—­excelï¼Œå¦åˆ™ä¼šæŠ¥é”™</li>
</ul>
<hr>
<h2 id="ä½¿ç”¨openpyxlåº“è¯»å†™excel"><strong>ä½¿ç”¨openpyxlåº“è¯»å†™excel</strong></h2>
<p>â€‹	xlrdå’Œxlwtå¤„ç†çš„æ˜¯xlsæ–‡ä»¶ï¼Œå•ä¸ªsheetæœ€å¤§è¡Œæ•°æ˜¯65535ï¼Œå¦‚æœæ•°æ®é‡è¶…è¿‡65535å°±ä¼šé‡åˆ°ï¼šValueError: row index was 65536, not allowed by .xls formatã€‚</p>
<p>â€‹	å¦‚æœæœ‰æ›´å¤§éœ€è¦çš„ï¼Œå»ºè®®ä½¿ç”¨openpyxlå‡½æ•°ï¼Œæœ€å¤§è¡Œæ•°è¾¾åˆ°1048576ã€‚</p>
<pre><code class="language-python"># å¯¼å…¥åŒ…
import openpyxl

# æ‰“å¼€excel
file_path = r'D:\work\testdata.xlsx'

inwb = openpyxl.load_workbook(file_path) # è¯»å–æ–‡ä»¶

# è·å–æ‰“å¼€çš„excelçš„sheetå†…å®¹
sheetnames = inwb.get_sheet_names()  # è·å–æ‰€æœ‰sheeté¡µçš„name

ws = inwb.get_sheet_by_name(sheetnames[0])  # æŒ‰ç…§nameè·å–ç¬¬ä¸€ä¸ªsheeté¡µçš„å†…å®¹

# è·å–sheetçš„æœ€å¤§è¡Œæ•°å’Œåˆ—æ•°
rows = ws.max_row
cols = ws.max_column

# è·å–æŸä¸ªå•å…ƒæ ¼çš„å€¼
ws.cell(1, 1).value

# æ‰“å¼€å°†å†™çš„è¡¨å¹¶æ·»åŠ sheet
outwb = openpyxl.Workbook()   # æ‰“å¼€ä¸€ä¸ªå°†å†™çš„æ–‡ä»¶

outws = outwb.create_sheet(index=0) # åœ¨å°†å†™çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„sheet

# ä¿å­˜
saveExcel = r'D:\work\new.xlsx'

outwb.save(saveExcel) # ä¸€å®šè¦è®°å¾—ä¿å­˜
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šæœ€åä¸€å®šè¦è®°å¾—ä¿å­˜ï¼Œå¦åˆ™å°±å‰åŠŸå°½å¼ƒå–½ğŸ˜²</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pythonè¯»å–config.iniæ–‡ä»¶]]></title>
        <id>https://liujinyang6.github.io/post/python-du-qu-config-ini-wen-jian/</id>
        <link href="https://liujinyang6.github.io/post/python-du-qu-config-ini-wen-jian/">
        </link>
        <updated>2020-03-01T01:33:50.000Z</updated>
        <content type="html"><![CDATA[<h2 id="è¯»å–æ­¥éª¤">è¯»å–æ­¥éª¤ï¼š</h2>
<h2 id="1å¯¼å…¥configparser">1.å¯¼å…¥configparser</h2>
<pre><code class="language-python">import configparser
</code></pre>
<hr>
<h2 id="2å®ä¾‹åŒ–ä¸€ä¸ªconfigparserå¯¹è±¡è¯»å–ç›®æ ‡é…ç½®æ–‡ä»¶å†…å®¹">2.å®ä¾‹åŒ–ä¸€ä¸ªconfigparserå¯¹è±¡ï¼Œè¯»å–ç›®æ ‡é…ç½®æ–‡ä»¶å†…å®¹</h2>
<pre><code class="language-python"># 1.å®ä¾‹åŒ–configparserå¯¹è±¡
conf = configparser.ConfigParser()

# 2.è·å–ç›®æ ‡.iniæ–‡ä»¶è·¯å¾„
file_path = os.path.dirname(â€˜xxxiniæ–‡ä»¶è·¯å¾„â€™)+&quot;\\config.ini&quot;

# 3.è¯»å–ç›®æ ‡æ–‡ä»¶å†…çš„å†…å®¹(section)ï¼Œå½“æœ‰ä¸­æ–‡çš„æ—¶å€™ä½¿ç”¨encoding
conf.read(file_path,encoding=&quot;utf-8-sig&quot;)

</code></pre>
<hr>
<ul>
<li>
<h3 id="configiniæ–‡ä»¶æ ¼å¼">config.iniæ–‡ä»¶æ ¼å¼</h3>
</li>
</ul>
<figure data-type="image" tabindex="1"><img src="https://liujinyang6.github.io/post-images/1592271873138.png" alt="" loading="lazy"></figure>
<hr>
<ul>
<li>
<h3 id="è·å–æ–‡ä»¶å†…çš„æ‰€æœ‰section">è·å–æ–‡ä»¶å†…çš„æ‰€æœ‰section</h3>
</li>
</ul>
<pre><code class="language-python">sections = conf.sections()
  
print('è·å–é…ç½®æ–‡ä»¶æ‰€æœ‰çš„section', sections)
</code></pre>
<ul>
<li>
<h3 id="è·å–xx-sectionä¸‹çš„æ‰€æœ‰option">è·å–xx sectionä¸‹çš„æ‰€æœ‰option</h3>
</li>
</ul>
<pre><code class="language-python">options = conf.options('mysql')

print('è·å–æŒ‡å®šsectionä¸‹æ‰€æœ‰option', options)
</code></pre>
<ul>
<li>
<h3 id="è·å–xx-sectionä¸‹çš„æ‰€æœ‰é”®å€¼å¯¹">è·å–xx sectionä¸‹çš„æ‰€æœ‰é”®å€¼å¯¹</h3>
</li>
</ul>
<pre><code class="language-python">items = conf.items('mysql')

print('è·å–æŒ‡å®šsectionä¸‹æ‰€æœ‰çš„é”®å€¼å¯¹', items)
</code></pre>
<ul>
<li>
<h3 id="è·å–xx-sectionä¸‹çš„æŸä¸ªoption">è·å–xx sectionä¸‹çš„æŸä¸ªoption</h3>
</li>
</ul>
<pre><code class="language-python">value = conf.get('mysql', 'host')

print('è·å–æŒ‡å®šçš„sectionä¸‹çš„option', value)
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¸¸ç”¨çš„é‚®ç®±æœåŠ¡å™¨]]></title>
        <id>https://liujinyang6.github.io/post/chang-yong-de-you-xiang-fu-wu-qi/</id>
        <link href="https://liujinyang6.github.io/post/chang-yong-de-you-xiang-fu-wu-qi/">
        </link>
        <updated>2020-02-13T07:21:29.000Z</updated>
        <content type="html"><![CDATA[<h2 id="ä¸€-å¸¸ç”¨çš„é‚®ç®±æœåŠ¡å™¨åœ°å€"><strong>ä¸€ã€å¸¸ç”¨çš„é‚®ç®±æœåŠ¡å™¨åœ°å€</strong></h2>
<h3 id="é˜¿é‡Œäº‘é‚®ç®±mailaliyuncom">é˜¿é‡Œäº‘é‚®ç®±ï¼ˆmail.aliyun.comï¼‰:</h3>
<p>POP3æœåŠ¡å™¨åœ°å€:pop3.aliyun.comï¼ˆSSLåŠ å¯†ç«¯å£ï¼š995ï¼›éåŠ å¯†ç«¯å£ï¼š110ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€:smtp.aliyun.comï¼ˆSSLåŠ å¯†ç«¯å£ï¼š465ï¼›éåŠ å¯†ç«¯å£ï¼š25ï¼‰</p>
<p>IMAPæœåŠ¡å™¨åœ°å€ï¼šimap.aliyun.comï¼ˆSSLåŠ å¯†ç«¯å£ï¼š993ï¼›éåŠ å¯†ç«¯å£ï¼š143ï¼‰</p>
<p></p>
<hr>
<h3 id="è°·æ­Œé‚®ç®±googlecom">è°·æ­Œé‚®ç®±(google.com)ï¼š</h3>
<p>POP3æœåŠ¡å™¨åœ°å€:pop.gmail.comï¼ˆSSLå¯ç”¨ç«¯å£ï¼š995ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€:smtp.gmail.comï¼ˆSSLå¯ç”¨ç«¯å£ï¼š587ï¼‰</p>
<p></p>
<hr>
<h3 id="æ–°æµªé‚®ç®±sinacom">æ–°æµªé‚®ç®±ï¼ˆsina.comï¼‰:</h3>
<p>POP3æœåŠ¡å™¨åœ°å€:pop3.sina.com.cnï¼ˆç«¯å£ï¼š110ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€:smtp.sina.com.cnï¼ˆç«¯å£ï¼š25ï¼‰</p>
<p></p>
<hr>
<h3 id="tomé‚®ç®±topcom">Tomé‚®ç®±ï¼ˆtop.comï¼‰:</h3>
<p>POP3æœåŠ¡å™¨åœ°å€:pop.tom.comï¼ˆç«¯å£ï¼š110ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€:smtp.tom.comï¼ˆç«¯å£ï¼š25ï¼‰</p>
<p></p>
<hr>
<h3 id="ç½‘æ˜“é‚®ç®±163com">ç½‘æ˜“é‚®ç®±ï¼ˆ163.comï¼‰:</h3>
<p>POP3æœåŠ¡å™¨åœ°å€:pop.163.comï¼ˆç«¯å£ï¼š110ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€:smtp.163.comï¼ˆç«¯å£ï¼š25ï¼‰</p>
<p></p>
<hr>
<h3 id="126é‚®ç®±">126é‚®ç®±:</h3>
<p>POP3æœåŠ¡å™¨åœ°å€ï¼špop.live.comï¼ˆç«¯å£ï¼š995ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€:smtp.126.comï¼ˆç«¯å£ï¼š25ï¼‰</p>
<p></p>
<hr>
<h3 id="é›…è™é‚®ç®±yahoocom">é›…è™é‚®ç®±ï¼ˆyahoo.comï¼‰:</h3>
<p>POP3æœåŠ¡å™¨åœ°å€:pop.mail.yahoo.com</p>
<p>SMTPæœåŠ¡å™¨åœ°å€:smtp.mail.yahoo.com</p>
<p></p>
<hr>
<h3 id="é›…è™ä¸­å›½yahoocomcn">é›…è™ä¸­å›½ï¼ˆyahoo.com.cnï¼‰:</h3>
<p>POP3æœåŠ¡å™¨åœ°å€:pop.mail.yahoo.com.cnï¼ˆç«¯å£ï¼š995ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€:smtp.mail.yahoo.com.cnï¼ˆç«¯å£ï¼š587ï¼‰</p>
<p>é›…è™é‚®ç®±POP3çš„SSLä¸å¯ç”¨ç«¯å£ä¸º110ï¼ŒPOP3çš„SSLå¯ç”¨ç«¯å£995ï¼›SMTPçš„SSLä¸å¯ç”¨ç«¯å£ä¸º25ï¼ŒSMTPçš„SSLå¯ç”¨ç«¯å£ä¸º465ã€‚</p>
<p></p>
<hr>
<h3 id="foxmailé‚®ç®±foxmailcom">Foxmailé‚®ç®±ï¼ˆfoxmail.comï¼‰ï¼š</h3>
<p>POP3æœåŠ¡å™¨åœ°å€:POP.foxmail.comï¼ˆç«¯å£ï¼š110ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€:SMTP.foxmail.comï¼ˆç«¯å£ï¼š25ï¼‰</p>
<p></p>
<hr>
<h3 id="qqé‚®ç®±mailqqcom">QQé‚®ç®±ï¼ˆmail.qq.comï¼‰</h3>
<p>POP3æœåŠ¡å™¨åœ°å€ï¼špop.qq.comï¼ˆç«¯å£ï¼š110ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€ï¼šsmtp.qq.comï¼ˆç«¯å£ï¼š25ï¼‰</p>
<p>SMTPæœåŠ¡å™¨éœ€è¦èº«ä»½éªŒè¯ã€‚</p>
<p></p>
<hr>
<h3 id="æœç‹é‚®ç®±sohucom">æœç‹é‚®ç®±ï¼ˆsohu.comï¼‰:</h3>
<p>POP3æœåŠ¡å™¨åœ°å€:pop3.sohu.comï¼ˆç«¯å£ï¼š110ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€:smtp.sohu.comï¼ˆç«¯å£ï¼š25ï¼‰</p>
<p></p>
<hr>
<p></p>
<h3 id="hotmailé‚®ç®±hotmailcom">HotMailé‚®ç®±ï¼ˆhotmail.comï¼‰ï¼š</h3>
<p>POP3æœåŠ¡å™¨åœ°å€ï¼špop.live.comï¼ˆç«¯å£ï¼š995ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€ï¼šsmtp.live.comï¼ˆç«¯å£ï¼š587</p>
<p></p>
<hr>
<h3 id="ç§»åŠ¨139é‚®ç®±">ç§»åŠ¨139é‚®ç®±:</h3>
<p>POP3æœåŠ¡å™¨åœ°å€ï¼šPOP.139.comï¼ˆç«¯å£ï¼š110ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€ï¼šSMTP.139.com(ç«¯å£ï¼š25)</p>
<p></p>
<hr>
<h3 id="ä¸­åç½‘é‚®ç®±chinacom">ä¸­åç½‘é‚®ç®±ï¼ˆchina.comï¼‰:</h3>
<p>POP3æœåŠ¡å™¨åœ°å€:pop.china.comï¼ˆç«¯å£ï¼š110ï¼‰</p>
<p>SMTPæœåŠ¡å™¨åœ°å€:smtp.china.comï¼ˆç«¯å£ï¼š25ï¼‰</p>
<p></p>
<hr>
<p>ä»¥ä¸Šä¾¿æ˜¯å¸¸ç”¨é‚®ç®±SMTPæœåŠ¡å™¨åœ°å€å¤§å…¨ã€‚å¯èƒ½è¿˜æœ‰äº›é‚®ç®±æœ¨æœ‰æ”¶é›†åˆ°ã€‚æˆ‘ä»¬åœ¨è®¾ç½®ä»£æ”¶å‘é‚®ä»¶è½¯ä»¶æ—¶å€™ï¼Œåœ¨POP3æœåŠ¡å™¨åœ°å€åŠSMTPæœåŠ¡å™¨åœ°å€å¤„ï¼Œåªéœ€è¦æŒ‰ç…§ä»¥ä¸Šé‚®ç®±å¯¹åº”å¡«å†™å³å¯ã€‚</p>
<h2 id="äºŒ-å¦‚ä½•æ‰“å¼€pop3smtpimapåŠŸèƒ½">äºŒã€å¦‚ä½•æ‰“å¼€POP3/SMTP/IMAPåŠŸèƒ½ï¼Ÿ</h2>
<p>ä¸ºäº†ä¿éšœç”¨æˆ·é‚®ç®±çš„å®‰å…¨ï¼ŒQQé‚®ç®±è®¾ç½®äº†POP3/SMTP/IMAPçš„å¼€å…³ã€‚ç³»ç»Ÿç¼ºçœè®¾ç½®æ˜¯â€œå…³é—­â€ï¼Œåœ¨ç”¨æˆ·éœ€è¦è¿™äº›åŠŸèƒ½æ—¶è¯·â€œå¼€å¯â€ã€‚</p>
<p>1.é¦–å…ˆï¼Œç™»å½•é‚®ç®±ï¼Œè¿›å…¥è®¾ç½®-å¸æˆ·ï¼›</p>
<figure data-type="image" tabindex="1"><img src="https://liujinyang6.github.io/post-images/1592551338857.jpg" alt="" loading="lazy"></figure>
<p>ç„¶åï¼Œåœ¨â€œå¸æˆ·â€è®¾ç½®ä¸­ï¼Œæ‰¾åˆ°è®¾ç½®é¡¹ï¼Œè¿›è¡Œè®¾ç½®ï¼Œå¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://liujinyang6.github.io/post-images/1592551345658.jpg" alt="" loading="lazy"></figure>
<p>æœ€åï¼Œä¿å­˜è®¾ç½®ï¼Œå³æ‰“å¼€äº†ç›¸åº”çš„æœåŠ¡ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Requestsæ•™ç¨‹]]></title>
        <id>https://liujinyang6.github.io/post/requests-jiao-cheng/</id>
        <link href="https://liujinyang6.github.io/post/requests-jiao-cheng/">
        </link>
        <updated>2020-02-02T06:19:27.000Z</updated>
        <content type="html"><![CDATA[<h3 id="å‘é€getè¯·æ±‚">å‘é€getè¯·æ±‚</h3>
<h4 id="getè¯·æ±‚">getè¯·æ±‚</h4>
<ol>
<li>å¯¼å…¥requestsåï¼Œç”¨getæ–¹æ³•å°±èƒ½ç›´æ¥è®¿é—®urlåœ°å€ï¼Œå¦‚ï¼šhttps://www.baidu.com</li>
<li>è¿™é‡Œçš„rä¹Ÿå°±æ˜¯responseï¼Œè¯·æ±‚åçš„è¿”å›å€¼ï¼Œå¯ä»¥è°ƒç”¨responseé‡Œçš„status_codeæ–¹æ³•æŸ¥çœ‹çŠ¶æ€ç </li>
<li>çŠ¶æ€ç 200åªèƒ½è¯´æ˜è¿™ä¸ªæ¥å£è®¿é—®çš„æœåŠ¡å™¨åœ°å€æ˜¯å¯¹çš„ï¼Œå¹¶ä¸èƒ½è¯´æ˜åŠŸèƒ½OKï¼Œä¸€èˆ¬è¦æŸ¥çœ‹å“åº”çš„å†…å®¹ï¼Œr.textï¼ˆr.content()ï¼‰æ˜¯è¿”å›æ–‡æœ¬ä¿¡æ¯</li>
</ol>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-python"># å¯¼å…¥requestsåº“
import requests

# è¯·æ±‚url
urlstr = 'https://www.baidu.com'

# å‘é€è¯·æ±‚
r = requests.get(url = urlstr)

# æŸ¥çœ‹å“åº”å†…å®¹
print(r.text)


</code></pre>
<h4 id="æºå¸¦å‚æ•°å‘é€getè¯·æ±‚">æºå¸¦å‚æ•°å‘é€getè¯·æ±‚</h4>
<ol>
<li>å†å‘ä¸€ä¸ªå¸¦å‚æ•°çš„getè¯·æ±‚ï¼Œå¦‚ç©å®‰å“æœç´¢ï¼Œåœ°å€ä¸ºï¼šhttps://www.wanandroid.com/article/query?k=Android</li>
<li>è¯·æ±‚å‚æ•°ï¼šk=Androidï¼Œå¯ä»¥ä»¥å­—å…¸çš„å½¢å¼ä¼ å‚:{&quot;k&quot;: &quot; Android &quot;}</li>
<li>å¤šä¸ªå‚æ•°æ ¼å¼ï¼š{&quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;: &quot;value2&quot;, &quot;key3&quot;: &quot;value3&quot;}</li>
</ol>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-python"># å¯¼å…¥requestsåº“
import requests

# è¯·æ±‚url
urlstr = 'https://www.wanandroid.com/article/query'

# è¯·æ±‚å‚æ•°
payload = {'k':'æµ‹è¯•'}

# å‘é€è¯·æ±‚
r = requests.get(url = urlstr, params = payload)

# æŸ¥çœ‹å“åº”ç»“æœ
print(r.text)
print(r.status_code)

</code></pre>
<h4 id="response">response</h4>
<p>responseçš„è¿”å›å†…å®¹è¿˜æœ‰å…¶ä»–æ›´å¤šä¿¡æ¯ï¼š</p>
<ul>
<li>
<p><code>r.status_code</code>   #å“åº”çŠ¶æ€ç </p>
</li>
<li>
<p><code>r.content</code>     #å­—èŠ‚æ–¹å¼çš„å“åº”ä½“ï¼Œä¼šè‡ªåŠ¨ä¸ºä½ è§£ç  gzip å’Œ deflate å‹ç¼©</p>
</li>
<li>
<p><code>r.headers</code>     #ä»¥å­—å…¸å¯¹è±¡å­˜å‚¨æœåŠ¡å™¨å“åº”å¤´ï¼Œä½†æ˜¯è¿™ä¸ªå­—å…¸æ¯”è¾ƒç‰¹æ®Šï¼Œå­—å…¸é”®ä¸åŒºåˆ†å¤§å°å†™ï¼Œè‹¥é”®ä¸å­˜åœ¨åˆ™è¿”å›None</p>
</li>
<li>
<p><code>r.json()</code>     #Requestsä¸­å†…ç½®çš„JSONè§£ç å™¨ï¼Œå¤„ç†åå¯¹åº”Pythonçš„dict</p>
</li>
<li>
<p><code>r.url</code>       # è·å–url</p>
</li>
<li>
<p><code>r.encoding</code>    # ç¼–ç æ ¼å¼</p>
</li>
<li>
<p><code>r.cookies</code>     # è·å–responseè¿”å›çš„cookie</p>
</li>
<li>
<p><code>r.raw</code>       #è¿”å›åŸå§‹å“åº”ä½“</p>
</li>
<li>
<p><code>r.text</code>      #å­—ç¬¦ä¸²æ–¹å¼çš„å“åº”ä½“ï¼Œä¼šè‡ªåŠ¨æ ¹æ®å“åº”å¤´éƒ¨çš„å­—ç¬¦ç¼–ç è¿›è¡Œè§£ç </p>
</li>
<li>
<p><code>r.raise_for_status()</code>      #å¤±è´¥è¯·æ±‚(é200å“åº”)æŠ›å‡ºå¼‚å¸¸</p>
</li>
</ul>
<hr>
<h3 id="å‘é€postè¯·æ±‚json">å‘é€postè¯·æ±‚ï¼ˆjsonï¼‰</h3>
<p>å‘é€postçš„è¯·æ±‚å‚è€ƒä¾‹å­å¾ˆç®€å•ï¼Œå®é™…é‡åˆ°çš„æƒ…å†µå´æ˜¯å¾ˆå¤æ‚çš„ï¼Œé¦–å…ˆç¬¬ä¸€ä¸ªpostè¯·æ±‚è‚¯å®šæ˜¯ç™»å½•äº†ï¼Œä½†ç™»å½•æ˜¯æœ€éš¾å¤„ç†çš„ã€‚ç™»å½•é—®é¢˜è§£å†³äº†ï¼Œåé¢éƒ½ç®€å•äº†ã€‚</p>
<h4 id="postè¯·æ±‚jsonå½¢å¼">postè¯·æ±‚(jsonå½¢å¼)</h4>
<p>postçš„bodyæ˜¯jsonç±»å‹ï¼Œæœ‰ä¸¤ç§æ–¹æ³•æ¥ä¼ é€’jsonæ•°æ®ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§ï¼šå…ˆå¯¼å…¥jsonæ¨¡å—ï¼Œç”¨dumpsæ–¹æ³•è½¬åŒ–æˆjsonæ ¼å¼ã€‚</li>
<li>ç¬¬äºŒç§ï¼šä½¿ç”¨jsonå‚æ•°é»˜è®¤å¤„ç†æˆjsonæ ¼å¼è¿›è¡Œä¼ é€’ã€‚</li>
<li>å°†è¿”å›ç»“æœï¼Œä¼ åˆ°dataé‡Œã€‚</li>
</ul>
<p>ç¤ºä¾‹1ï¼š</p>
<pre><code class="language-python"># å¯¼å…¥requestsã€jsonåº“
import requests
import json

# å‘é€postè¯·æ±‚
urlstr = 'http://httpbin.org/post'

# è¯·æ±‚å‚æ•°
payload = {'key1':'value1','key2':'value2'}

# é€šè¿‡json.dumpsæ–¹æ³•å°†Pythonå­—ç¬¦ä¸²è½¬æ¢æˆjsonç±»å‹
payload = json.dumps(payload)

# å‘é€è¯·æ±‚
r = requests.post(url = urlstr, data = payload)

# è·å–ç»“æœ
print(r.text)

# å¦‚æœè¿”å›å€¼ä¸ºjsonæ ¼å¼å¯ä»¥é€šè¿‡r.jsonæ–¹æ³•æ¥æŸ¥çœ‹ç»“æœ
print(r.json())

</code></pre>
<p>ç¤ºä¾‹2ï¼š</p>
<pre><code class="language-python"># å¯¼å…¥requestsã€jsonåº“
import requests
import json

# å‘é€postè¯·æ±‚
urlstr = 'http://httpbin.org/post'

# è¯·æ±‚å‚æ•°
payload = {'key1':'value1','key2':'value2'}

# å‘é€è¯·æ±‚ï¼Œæ¥å£è¯·æ±‚ä¸ºjsonæ•°æ®ï¼Œé€šè¿‡json=è‡ªåŠ¨å°†Pythonæ•°æ®ç±»å‹è½¬æ¢ä¸ºjsonæ•°æ®ç±»å‹
r = requests.post(url = urlstr, json = payload)

# è·å–ç»“æœ
print(r.text)

# å¦‚æœè¿”å›å€¼ä¸ºjsonæ ¼å¼å¯ä»¥é€šè¿‡r.jsonæ–¹æ³•æ¥æŸ¥çœ‹ç»“æœ
print(r.json())

</code></pre>
<h4 id="headers">headers</h4>
<p>ä»¥ç©Androidç™»å½•ä¸ºä¾‹ï¼ŒæŠ“åŒ…æŸ¥çœ‹è¯·æ±‚å¤´ï¼Œheaderä¸ºPythonçš„å­—å…¸ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥æ”¯æŒdictç±»å‹çš„æ‰€æœ‰æ“ä½œæ–¹å¼æ·»åŠ headerä¿¡æ¯ï¼Œå¯ä»¥ç›´æ¥å®šä¹‰{}ï¼Œä¹Ÿå¯ä»¥é€šè¿‡dict[key]çš„æ–¹å¼æ·»åŠ ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-python"># å¯¼å…¥requests
import requests

# è¯·æ±‚url
urlstr = 'https://www.wanandroid.com/user/login'

# è¯·æ±‚å¤´
header = {'User-Agent':'Molilla/6.0'}

# è¯·æ±‚å‚æ•°
payload = {'username':'liu','password':'123456'}

# å‘é€postè¯·æ±‚
r = requests.post(url = urlstr, data = payload, headers = header)

# è·å–ç»“æœ
print(r.text)
print(r.headers)

</code></pre>
<hr>
<h3 id="å‘é€postè¯·æ±‚data">å‘é€postè¯·æ±‚ï¼ˆdataï¼‰</h3>
<p>å‰é¢ç¤ºä¾‹çš„æ˜¯ä¼ jsonå‚æ•°ï¼Œæœ‰äº›postè¯·æ±‚ä¸æ˜¯ä¼ jsonç±»å‹æ•°æ®çš„ï¼Œä¸‹é¢å°±ä»¥ä¼ dataå‚æ•°ä¸ºä¾‹ã€‚</p>
<h4 id="postè¯·æ±‚è¡¨å•å½¢å¼">postè¯·æ±‚(è¡¨å•å½¢å¼)</h4>
<p>ç”¨ä¸Šé¢ç»™çš„ç¤ºä¾‹ï¼Œåšä¸ªç®€å•ä¿®æ”¹ï¼Œå‘ä¸ªpostè¯·æ±‚ï¼Œpayloadå‚æ•°æ˜¯å­—å…¸ç±»å‹ï¼Œä¼ åˆ°formé‡Œï¼ˆæ³¨æ„postè¯·æ±‚å‚æ•°ä½¿ç”¨<code>data=</code>ï¼‰ï¼Œç¤ºä¾‹ä¸­çš„responseè¿”å›çš„æ˜¯ä¸€ä¸ªjsonï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡r.jsonçš„æ–¹å¼æ¥æŸ¥çœ‹ç»“æœï¼Œé€šè¿‡dictå¼•ç”¨çš„æ–¹å¼å–å€¼dict[â€˜keyâ€™]</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-python"># å¯¼å…¥requests
import requests

# è¯·æ±‚url
urlstr = 'https://www.wanandroid.com/user/login'

# è¯·æ±‚å‚æ•°
payload = {'username':'liu','password':'123456'}

# å‘é€postè¯·æ±‚
r = requests.post(url = urlstr, data = payload)

# è·å–ç»“æœ
print(r.text)

# æŸ¥çœ‹ç±»å‹
print(type(r.json()))
# æŸ¥çœ‹åç±»å‹ä¸ºå­—å…¸ç±»å‹ï¼Œr.json()å°†responseä¸­è¿”å›çš„jsonå¤„ç†æˆäº†dict

# é€šè¿‡dictçš„keyæ¥è®¿é—®å¯¹åº”çš„å€¼
print(r.json()['data']['username'])

</code></pre>
<p>æœ‰æ—¶å€™bodyå‚æ•°å¹¶ä¸æ˜¯jsonæ ¼å¼ï¼Œæ˜¯key=valueæ ¼å¼ï¼Œä¹Ÿå°±æ˜¯å‰é¢ä»‹ç»postè¯·æ±‚å››ç§æ•°æ®ç±»å‹é‡Œé¢çš„ç¬¬äºŒç§ã€‚</p>
<h4 id="å¦‚ä½•åˆ¤æ–­ç™»å½•æˆåŠŸ">å¦‚ä½•åˆ¤æ–­ç™»å½•æˆåŠŸï¼Ÿ</h4>
<p>step 1 ï¼šåˆ¤æ–­ç™»å½•æˆåŠŸï¼Œå¯ä»¥æŠ“å–é¡µé¢ä¸Šçš„å…³é”®å…ƒç´ ï¼Œæ¯”å¦‚ï¼šè´¦å·åç§°ï¼Œæ³¨é”€æŒ‰é’®</p>
<p>step2  ï¼šé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æå‡ºè¿™2ä¸ªå…³é”®å­—</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-python"># å¯¼å…¥requests
import requests

# è¯·æ±‚url
urlstr = 'https://www.wanandroid.com/user/login'

# è¯·æ±‚å‚æ•°
payload = {'username':'liu','password':'123456'}

# å‘é€postè¯·æ±‚
r = requests.post(url = urlstr, data = payload)

# è·å–ç»“æœ
print(r.text)

# æŸ¥çœ‹ç±»å‹
print(type(r.json()))
# æŸ¥çœ‹åç±»å‹ä¸ºå­—å…¸ç±»å‹ï¼Œr.json()å°†responseä¸­è¿”å›çš„jsonå¤„ç†æˆäº†dict

# é€šè¿‡dictçš„keyæ¥è®¿é—®å¯¹åº”çš„å€¼
print(r.json()['data']['username'])

if r.json()['data']['username'] == payload['username']:
	
	print(&quot;ç™»å½•æˆåŠŸï¼&quot;)
</code></pre>
<hr>
<h3 id="å‘httpsè¯·æ±‚ssl">å‘httpsè¯·æ±‚ï¼ˆsslï¼‰</h3>
<p>æœ¬æ¥æœ€æ–°çš„requestsåº“V1.13.0æ˜¯æ”¯æŒhttpsè¯·æ±‚çš„ï¼Œä½†æ˜¯ä¸€èˆ¬å†™è„šæœ¬æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šç”¨æŠ“åŒ…å·¥å…·fiddlerï¼Œè¿™æ—¶å€™ä¼š æŠ¥ï¼šrequests.exceptions.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<ol>
<li>
<p>ä¸å¯ç”¨fiddlerï¼Œç›´æ¥å‘httpsè¯·æ±‚ï¼Œä¸ä¼šæœ‰SSLé—®é¢˜ï¼ˆä¹Ÿå°±æ˜¯è¯´ä¸æƒ³çœ‹åˆ°SSLé—®é¢˜ï¼Œå…³æ‰fiddlerå°±è¡Œï¼‰</p>
</li>
<li>
<p>å¯åŠ¨fiddleræŠ“åŒ…ï¼Œé”™è¯¯æç¤ºå°±æ˜¯ä¸Šé¢è¿™æ ·çš„ã€‚é¦–å…ˆæˆ‘æ‰¾äº†å¾ˆå¤šçš„èµ„æ–™ï¼Œæœ‰å¾ˆå¤šäººè¯´å…³é—­è¯ä¹¦éªŒè¯ï¼ˆverify=Falseï¼‰ï¼‰å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜æˆ–è€…è¯´æ˜¯åœ¨è¿›è¡ŒGETæ—¶,æŒ‡å®šSSLè¯ä¹¦ã€‚</p>
<pre><code class="language-python">response = requests.get('http://www.baidu.com/', headers = header, verify=False)
</code></pre>
<p>ä½†æˆ‘ç”¨ä»¥ä¸Šä¸¤ç§æ–¹æ³•éƒ½æ²¡æœ‰å®Œç¾è§£å†³æ­¤é—®é¢˜ï¼Œè€Œä¸”æœ‰äº›è¿˜æœ‰åç»­é”™è¯¯æ¯”å¦‚InsecureRequestWarning</p>
<p>åªè¦å®‰è£…ä¸€ä¸‹å‡ ä¸ªrequestsä¾èµ–åŒ…å°±å¯ä»¥è§£å†³æ­¤é—®é¢˜</p>
<pre><code class="language-python">pip install cryptography

pip install pyOpenSSL

pip install certifi
</code></pre>
</li>
</ol>
<hr>
<h3 id="sessionå…³è”æ¥å£">sessionå…³è”æ¥å£</h3>
<p>å‰é¢æ¨¡æ‹Ÿç™»å½•äº†ç©å®‰å“ï¼Œä½†è¿™åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œä¸€èˆ¬ç™»å½•åï¼Œè¿˜ä¼šæœ‰å…¶å®ƒçš„æ“ä½œï¼Œå¦‚å‘å¸–ï¼Œè¯„è®ºç­‰ï¼Œè¿™æ—¶å€™å¦‚ä½•ä¿æŒä¼šè¯å‘¢ï¼Ÿ</p>
<h4 id="ä½¿ç”¨sessionç™»å½•">ä½¿ç”¨sessionç™»å½•</h4>
<ol>
<li>ä½¿ç”¨sessionç™»å½• s = requests.session()</li>
<li>é€šè¿‡sessionå‡½æ•°è‡ªåŠ¨æºå¸¦ä¸Šæ¬¡è¯·æ±‚è¿”å›çš„cookieä¿¡æ¯ï¼Œå‘é€äºŒæ¬¡postè¯·æ±‚</li>
</ol>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-python"># å¯¼å…¥requests
import requests

# è¯·æ±‚url
urlstr = 'https://www.wanandroid.com/user/login'

# è¯·æ±‚å‚æ•°
payload = {'username':'liu','password':'123456'}

# åˆå§‹åŒ–sessionå¯¹è±¡
s = requests.session()

# é€šè¿‡sessionå¯¹è±¡å‘é€postè¯·æ±‚ï¼ŒæœåŠ¡å™¨è®¾ç½®åœ¨æœ¬åœ°çš„cookieä¼šä¿å­˜åœ¨æœ¬åœ°
r = s.post(url = urlstr, data = payload)

# é€šè¿‡sessionå¯¹è±¡ç»§ç»­å‘é€è¯·æ±‚ï¼Œè‡ªåŠ¨æºå¸¦ä¸Šä¸€ä¸ªè¯·æ±‚è¿”å›çš„cookie
r2 = s.get('https://www.wanandroid.com/lg/todo/list/0')

# è·å–ç»“æœ
print(r.text)
print(r2.text)
</code></pre>
<hr>
<h3 id="jsonæ•°æ®å¤„ç†">jsonæ•°æ®å¤„ç†</h3>
<p>æœ‰äº›postçš„è¯·æ±‚å‚æ•°æ˜¯<code>json</code>æ ¼å¼çš„ï¼Œè¿™ä¸ªå‰é¢postè¯·æ±‚é‡Œé¢æåˆ°è¿‡ï¼Œéœ€è¦å¯¼å…¥<code>json</code>æ¨¡å—å¤„ç†ã€‚<br>
ä¸€èˆ¬å¸¸è§çš„æ¥å£è¿”å›æ•°æ®ä¹Ÿæ˜¯<code>json</code>æ ¼å¼çš„ï¼Œæˆ‘ä»¬åœ¨åšå¤„ç†æ—¶å€™ï¼Œå¾€å¾€åªéœ€è¦æå–å…¶ä¸­å‡ ä¸ªå…³é”®çš„å‚æ•°å°±è¡Œï¼Œè¿™æ—¶å€™å°±éœ€è¦<code>json</code>æ¥è§£æè¿”å›çš„æ•°æ®äº†ã€‚</p>
<p>å‰æï¼š<code>import json</code></p>
<p><code>json.dumps</code> å°† <strong>Python å¯¹è±¡</strong>ç¼–ç æˆ <strong>JSON å­—ç¬¦ä¸²</strong>--------ç›¸å½“äº------<code>encodeç¼–ç </code></p>
<p><code>json.loads</code> å°†<strong>å·²ç¼–ç çš„ JSON å­—ç¬¦ä¸²</strong>è§£ç ä¸º <strong>Python å¯¹è±¡</strong>--------ç›¸å½“äº------<code>decodeè§£ç </code></p>
<p><strong>Json</strong>ç®€ä»‹ï¼š<strong>Json</strong>ï¼Œå…¨å JavaScript Object Notationï¼Œæ˜¯ä¸€ç§<strong>è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼</strong>,å¸¸ç”¨äºhttpè¯·æ±‚ä¸­ã€‚</p>
<h4 id="encodepython-json">Encodeï¼ˆpython-&gt;jsonï¼‰</h4>
<p>é¦–å…ˆè¯´ä¸‹ä¸ºä»€ä¹ˆè¦encodeï¼Œ<code>python</code>é‡Œé¢boolå€¼æ˜¯<code>True</code>å’Œ<code>False</code>,<code>json</code>é‡Œé¢boolå€¼æ˜¯<code>true</code>å’Œ<code>false</code>,å¹¶ä¸”åŒºåˆ†å¤§å°å†™ï¼Œè¿™å°±å°´å°¬äº†ï¼Œæ˜æ˜éƒ½æ˜¯boolå€¼ã€‚</p>
<p>åœ¨pythoné‡Œé¢å†™çš„ä»£ç ï¼Œä¼ åˆ°jsoné‡Œï¼Œè‚¯å®šè¯†åˆ«ä¸äº†ï¼Œæ‰€ä»¥éœ€è¦æŠŠpythonçš„ä»£ç ç»è¿‡encodeåæˆä¸ºjsonå¯è¯†åˆ«çš„æ•°æ®ç±»å‹ã€‚</p>
<ol>
<li>ä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œä¸‹å›¾ä¸­dictç±»å‹ç»è¿‡<code>json.dumps()</code>åå˜æˆ<code>str</code>ï¼Œ<code>True</code>å˜æˆäº†<code>true</code>,<code>False</code>å˜æˆäº†<code>fasle</code>.</li>
</ol>
<figure data-type="image" tabindex="1"><img src="https://liujinyang6.github.io/post-images/1594707616351.png" alt="" loading="lazy"></figure>
<ol start="2">
<li>ä»¥ä¸‹å¯¹åº”å…³ç³»è¡¨æ˜¯ä»jsonæ¨¡å—çš„æºç é‡Œé¢çˆ¬å‡ºæ¥çš„.pythonçš„æ•°æ®ç±»ï¼Œç»è¿‡encodeæˆjsonçš„æ•°æ®ç±»å‹ï¼Œå¯¹åº”çš„è¡¨å¦‚ä¸‹ï¼š</li>
</ol>
<figure data-type="image" tabindex="2"><img src="https://liujinyang6.github.io/post-images/1594707625659.png" alt="" loading="lazy"></figure>
<h4 id="decodejson-python">Decodeï¼ˆjson-&gt;pythonï¼‰</h4>
<ol>
<li>ä»¥ç™»å½•æˆåŠŸè¿”å›ç»“æœï¼š{&quot;success&quot;:true}ä¸ºä¾‹ï¼Œæˆ‘ä»¬å…¶å®æœ€æƒ³çŸ¥é“çš„æ˜¯successè¿™ä¸ªå­—æ®µè¿”å›çš„æ˜¯Trueè¿˜æ˜¯False</li>
<li>å¦‚æœä»¥contentå­—èŠ‚è¾“å‡ºï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š{&quot;success&quot;:true}ï¼Œè¿™æ ·è·å–åé¢é‚£ä¸ªç»“æœå°±ä¸æ–¹ä¾¿äº†</li>
<li>å¦‚æœç»è¿‡jsonè§£ç åï¼Œè¿”å›çš„å°±æ˜¯ä¸€ä¸ªå­—å…¸ï¼š{u'success': True}ï¼Œè¿™æ ·è·å–åé¢é‚£ä¸ªç»“æœï¼Œå°±ç”¨å­—å…¸çš„æ–¹å¼å»å–å€¼ï¼šresult2[&quot;success&quot;]</li>
</ol>
<figure data-type="image" tabindex="3"><img src="https://liujinyang6.github.io/post-images/1594707635239.png" alt="" loading="lazy"></figure>
<ol start="4">
<li>åŒæ ·jsonæ•°æ®è½¬åŒ–æˆpythonå¯è¯†åˆ«çš„æ•°æ®ï¼Œå¯¹åº”çš„è¡¨å…³ç³»å¦‚ä¸‹</li>
</ol>
<figure data-type="image" tabindex="4"><img src="https://liujinyang6.github.io/post-images/1594707647259.png" alt="" loading="lazy"></figure>
<h4 id="æ¡ˆä¾‹åˆ†æ">æ¡ˆä¾‹åˆ†æ</h4>
<p>æ¯”å¦‚æ‰“å¼€å¿«é€’ç½‘ï¼šhttp://www.kuaidi.com/ï¼Œæœç´¢æŸä¸ªå•å·ï¼Œåˆ¤æ–­å®ƒçš„çŠ¶æ€æ˜¯ä¸æ˜¯å·²ç­¾æ”¶</p>
<figure data-type="image" tabindex="5"><img src="https://liujinyang6.github.io/post-images/1594707666440.png" alt="" loading="lazy"></figure>
<p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="6"><img src="https://liujinyang6.github.io/post-images/1594707674773.png" alt="" loading="lazy"></figure>
<hr>
<h3 id="tokenç™»å½•">tokenç™»å½•</h3>
<p>æœ‰äº›ç™»å½•ä¸æ˜¯ç”¨<code>cookie</code>æ¥éªŒè¯çš„ï¼Œæ˜¯ç”¨<code>token</code>å‚æ•°æ¥åˆ¤æ–­æ˜¯å¦ç™»å½•ã€‚<br>
tokenä¼ å‚æœ‰ä¸¤ç§ä¸€ç§æ˜¯æ”¾åœ¨<strong>è¯·æ±‚å¤´</strong>é‡Œï¼Œæœ¬è´¨ä¸Šæ˜¯è·Ÿcookieæ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯æ¢ä¸ªå•è¯è€Œå·²ï¼›å¦å¤–ä¸€ç§æ˜¯åœ¨<strong>urlè¯·æ±‚å‚æ•°</strong>é‡Œï¼Œè¿™ç§æ›´ç›´è§‚ã€‚</p>
<ol>
<li>å¦‚ä¸‹å›¾çš„è¿™ä¸ªç™»å½•ï¼Œæ— cookies</li>
</ol>
<figure data-type="image" tabindex="7"><img src="https://liujinyang6.github.io/post-images/1594707685576.png" alt="" loading="lazy"></figure>
<ol start="2">
<li>ä½†æ˜¯ç™»å½•æˆåŠŸåæœ‰è¿”å›token</li>
</ol>
<figure data-type="image" tabindex="8"><img src="https://liujinyang6.github.io/post-images/1594707693875.png" alt="" loading="lazy"></figure>
<ol start="3">
<li>ç™»å½•æˆåŠŸåç»§ç»­æ“ä½œå…¶å®ƒé¡µé¢ï¼Œå‘ç°postè¯·æ±‚çš„è¯·æ±‚å¤´ï¼Œéƒ½ä¼šå¸¦tokenå‚æ•°</li>
</ol>
<figure data-type="image" tabindex="9"><img src="https://liujinyang6.github.io/post-images/1594707704534.png" alt="" loading="lazy"></figure>
<ol start="4">
<li>è¿™ç§è¯·æ±‚å…¶å®æ¯”cookieæ›´ç®€å•ï¼Œç›´æ¥æŠŠç™»å½•åçš„tokenæ”¾åˆ°å¤´éƒ¨å°±è¡Œ</li>
</ol>
<h4 id="tokenå…³è”">tokenå…³è”</h4>
<p>æ­¥éª¤ï¼š</p>
<ol>
<li>ç”¨è„šæœ¬å®ç°ç™»å½•ï¼Œè·å–tokenå‚æ•°ï¼Œè·å–åä¼ å‚åˆ°è¯·æ±‚å¤´å°±å¯ä»¥äº†</li>
<li>å¦‚æœç™»å½•æœ‰éªŒè¯ç ï¼Œå‰é¢çš„è„šæœ¬ç™»å½•æ­¥éª¤å°±çœç•¥äº†ï¼Œè‡ªå·±æ‰‹åŠ¨ç™»å½•åè·å–token</li>
</ol>
<pre><code class="language-python">import requests

body = {&quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;: &quot;value2&quot;}  # è¿™é‡Œè´¦å·å¯†ç æ˜¯æŠ“åŒ…åçš„æ•°æ®

s = requests.session()

login_url = &quot;http://xxxx/login&quot;    # è‡ªå·±æ‰¾å¸¦tokençš„ç½‘å€

login_request = s.post(login_url, data = body)

# è¿™é‡Œtokenåœ¨è¿”å›çš„jsoné‡Œï¼Œå¯ä»¥ç›´æ¥æå–
token = login_request.json()[&quot;token&quot;]

# æ·»åŠ tokenåˆ°è¯·æ±‚å¤´éƒ¨
header[&quot;token&quot;] = token

# å¦‚æœè¿™ä¸ªpostè¯·æ±‚å¤´çš„å…¶ä»–å‚æ•°å˜äº†ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ›´æ–°
header[&quot;Content-Length&quot;] = &quot;9&quot;
body1 = {&quot;key&quot;: &quot;value&quot;}

# è°ƒç”¨ç™»å½•åçš„å…¶ä»–æ¥å£
post_request = s.post(post_url, headers = header, data = body1)

# æŸ¥çœ‹ç»“æœ
print(post_request.content)
</code></pre>
<hr>
<h3 id="æºå¸¦cookieå‘é€è¯·æ±‚">æºå¸¦cookieå‘é€è¯·æ±‚</h3>
<p>è¿™é‡Œæ•´ç†äº†4ç§æºå¸¦cookieçš„æ–¹æ³•ï¼š</p>
<h4 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€ï¼š</h4>
<p>é€šè¿‡<code>r.cookies</code>æ‰‹åŠ¨è·å–ä¸Šä¸€è¯·æ±‚è¿”å›çš„<code>cookie</code>æ¥è®¾ç½®ä¸‹æ¬¡è¯·æ±‚çš„<code>cookie</code></p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-python">&quot;&quot;&quot;
é€šè¿‡r.cookiesæ‰‹åŠ¨è·å–ä¸Šä¸€è¯·æ±‚è¿”å›çš„cookieæ¥è®¾ç½®ä¸‹æ¬¡è¯·æ±‚çš„cookie
&quot;&quot;&quot;

# å¯¼å…¥requests
import requests

# è¯·æ±‚url
urlstr = 'https://www.wanandroid.com/user/login'

# è¯·æ±‚å‚æ•°
payload = {'username':'liu','password':'123456'}

# å‘é€postè¯·æ±‚
r = requests.post(url = urlstr, data = payload)

# è·å–ç»“æœ
print(r.text)
# è·å–è¿”å›çš„cookie
print(r.cookies)
# è·å–è¿”å›çš„header
print(r.headers)

# è·å–ä¸Šæ¬¡è¯·æ±‚è¿”å›çš„responseä¸­çš„cookieï¼Œä¼ é€’ç»™ä¸‹æ¬¡è¯·æ±‚
cookie = r.cookies

# æºå¸¦cookieå‘é€è¯·æ±‚
r2 = requests.get('http://www.wanandroid.com/lg/todo/list/0', cookies = cookie )

# æŸ¥çœ‹ç¬¬äºŒä¸ªè¯·æ±‚çš„ç»“æœ
print(r2.text)
print(r2.status_code)

</code></pre>
<h4 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒï¼š</h4>
<p>é€šè¿‡<code>rquests.session</code>è‡ªåŠ¨è®¾ç½®<code>cookie</code>ï¼Œæ¥å®Œæˆè®¿é—®</p>
<pre><code class="language-python">&quot;&quot;&quot;
é€šè¿‡rquests.sessionè‡ªåŠ¨è®¾ç½®cookieï¼Œæ¥å®Œæˆè®¿é—®
&quot;&quot;&quot;

# å¯¼å…¥requests
import requests

# è¯·æ±‚url
urlstr = 'https://www.wanandroid.com/user/login'

# è¯·æ±‚å‚æ•°
payload = {'username':'liu','password':'123456'}

# åˆå§‹åŒ–sessionå¯¹è±¡
s = requests.session()

# é€šè¿‡sessionå¯¹è±¡å‘é€postè¯·æ±‚ï¼ŒæœåŠ¡å™¨è®¾ç½®åœ¨æœ¬åœ°çš„cookieä¼šä¿å­˜åœ¨æœ¬åœ°
r = s.post(url = urlstr, data = payload)

# é€šè¿‡sessionå¯¹è±¡ç»§ç»­å‘é€è¯·æ±‚ï¼Œè‡ªåŠ¨æºå¸¦ä¸Šä¸€ä¸ªè¯·æ±‚è¿”å›çš„cookie
r2 = s.get('https://www.wanandroid.com/lg/todo/list/0')

# è·å–ç»“æœ
print(r.text)
print(r2.text)

</code></pre>
<h4 id="æ–¹æ³•ä¸‰">æ–¹æ³•ä¸‰ï¼š</h4>
<p>é€šè¿‡å®šåˆ¶<code>cookie</code>ï¼Œå•ç‹¬è®¾ç½®<code>cookie</code>æ¥è®¿é—®ç›®æ ‡ç½‘å€</p>
<pre><code class="language-python">&quot;&quot;&quot;
é€šè¿‡å®šåˆ¶cookieï¼Œå•ç‹¬è®¾ç½®cookieæ¥è®¿é—®ç›®æ ‡ç½‘å€
&quot;&quot;&quot;

# å¯¼å…¥requests
import requests

# è¯·æ±‚url
urlstr = 'https://www.wanandroid.com/user/login'

# è¯·æ±‚å‚æ•°
payload = {'username':'liu','password':'123456'}

# å‘é€postè¯·æ±‚
r = requests.post(url = urlstr, data = payload)
print(r.text)

print(r.cookies['JSESSIONID'])

# è·å–ä¸Šæ¬¡è¯·æ±‚è¿”å›çš„responseä¸­çš„cookieï¼Œé€šè¿‡å­—å…¸çš„å½¢å¼å¼•ç”¨cookieè¿”å›çš„JSESSIONIDï¼Œ
# æ”¾å…¥ä¸‹ä¸€æ¬¡è¯·æ±‚çš„cookieä¸­
cookie = {
    'JSESSIONID':r.cookie['JSESSIONID']
}

# æºå¸¦cookieå‘é€è¯·æ±‚
r2 = requests.get('https://www.wanandroid.com/lg/todo/list/0',cookies = cookie)

# æŸ¥çœ‹ç»“æœ
print(r2.text)
print(r2.headers)

</code></pre>
<h4 id="æ–¹æ³•å››">æ–¹æ³•å››ï¼š</h4>
<p>é€šè¿‡å®šåˆ¶cookieï¼Œæ”¾å…¥headeræ¥è®¿é—®ç›®æ ‡ç½‘å€</p>
<pre><code class="language-python">&quot;&quot;&quot;
é€šè¿‡å®šåˆ¶cookieï¼Œæ”¾å…¥headeræ¥è®¿é—®ç›®æ ‡ç½‘å€
&quot;&quot;&quot;

# å¯¼å…¥requests
import requests

# è¯·æ±‚url
urlstr = 'https://www.wanandroid.com/user/login'

# è¯·æ±‚å‚æ•°
payload = {'username':'liu','password':'123456'}

# å‘é€postè¯·æ±‚
r = requests.post(url = urlstr, data = payload)
print(r.text)
print(r.cookies)
print(r.headers)
print(r.cookies['JSESSIONID'])

# è·å–ä¸Šæ¬¡è¯·æ±‚è¿”å›çš„responseä¸­çš„cookieï¼Œé€šè¿‡å­—å…¸çš„å½¢å¼å¼•ç”¨cookieè¿”å›çš„JSESSIONIDï¼Œæ”¾å…¥
# ä¸‹ä¸€æ¬¡è¯·æ±‚çš„headerä¸­
header = {
    'cookie':'JSESSIONID='+r.cookies['JSESSIONID']
}

# æºå¸¦headerå‘é€è¯·æ±‚
r2 = requests.get('https://www.wanandroid.com/lg/todo/list/0',headers = header)

print(r2.text)
print(r2.headers)

# str.findæ–¹æ³•è¿”å›-1è¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°ï¼Œé-1è¡¨ç¤ºæ‰¾åˆ°
result = r2.text.find(&quot;å·²å®Œæˆæ¸…å•&quot;)
print(result)

if result != -1:
    
    print(&quot;æŸ¥è¯¢æˆåŠŸï¼&quot;)
    
else:
    
    print(&quot;æŸ¥è¯¢å¤±è´¥ï¼&quot;)
    

</code></pre>
]]></content>
    </entry>
</feed>